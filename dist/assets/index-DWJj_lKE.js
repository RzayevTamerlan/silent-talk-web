import{h as Ar,r as s,e as le,k as Ne,m as P,q as Ce,c as V,B as Pe,ac as kr,a as jr,a7 as Lr,a3 as zr,a2 as Hr,n as Ct,v as Yt,o as In,N as Qt,O as Dr,i as Pt,p as Jt,x as Fr,aa as Vr,R as Ur,A as Mt,_ as At,ad as qr,ae as Bn,af as Wr,s as Rn,I as Se,ag as Xr,ah as Zt,ai as Gr,aj as Kr,ak as Yr,Y as Qr,X as Jr,S as m,al as Zr,am as eo,a0 as ve,W as to,an as no,ao as ro}from"./index-C6mIxUGH.js";import{a as wt,b as $t,i as en,g as oo,d as Nn,c as so,L as Pn}from"./index-kqHTlqty.js";import{I as ce,aG as io,aH as ao,a1 as we,aI as lo,A as Me,aj as co,T as Ye,C as uo,an as po,al as We,b as Mn,aJ as ho,e as An,aK as fo,d as kn,ai as mo,am as kt,aq as go,aL as yo,aM as bo,aN as vo,aO as xo,aP as Co,s as wo,w as $o,v as So,y as St,aQ as Eo,ak as Oo,z as _o,aR as To,aS as Io,X as Bo,B as he,aT as Ro,K as tn,ax as No,a as Po,q as Mo,a5 as nn,a6 as rn,a7 as on,af as ae,ab as Qe,ae as Ee,a8 as jt,aU as Ao,aV as ko,aa as Lt,aW as jn,ac as Ln,ad as zn}from"./d-func-BWQltiJr.js";var jo=function(e){if(Ar()&&window.document.documentElement){var n=Array.isArray(e)?e:[e],r=window.document.documentElement;return n.some(function(o){return o in r.style})}return!1};function sn(t,e){return jo(t)}const Lo=t=>typeof t!="object"&&typeof t!="function"||t===null;var zo={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},Ho=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:zo}))},Do=s.forwardRef(Ho);const Hn=s.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}}),Fo=t=>{const{antCls:e,componentCls:n,colorText:r,footerBg:o,headerHeight:i,headerPadding:a,headerColor:c,footerPadding:l,fontSize:d,bodyBg:p,headerBg:h}=t;return{[n]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:p,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${n}-header`]:{height:i,padding:a,color:c,lineHeight:P(i),background:h,[`${e}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:l,color:r,fontSize:d,background:o},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},Dn=t=>{const{colorBgLayout:e,controlHeight:n,controlHeightLG:r,colorText:o,controlHeightSM:i,marginXXS:a,colorTextLightSolid:c,colorBgContainer:l}=t,d=r*1.25;return{colorBgHeader:"#001529",colorBgBody:e,colorBgTrigger:"#002140",bodyBg:e,headerBg:"#001529",headerHeight:n*2,headerPadding:`0 ${d}px`,headerColor:o,footerPadding:`${i}px ${d}px`,footerBg:e,siderBg:"#001529",triggerHeight:r+a*2,triggerBg:"#002140",triggerColor:c,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:l,lightTriggerBg:l,lightTriggerColor:o}},Fn=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],Vn=Ne("Layout",Fo,Dn,{deprecatedTokens:Fn}),Vo=t=>{const{componentCls:e,siderBg:n,motionDurationMid:r,motionDurationSlow:o,antCls:i,triggerHeight:a,triggerColor:c,triggerBg:l,headerHeight:d,zeroTriggerWidth:p,zeroTriggerHeight:h,borderRadiusLG:u,lightSiderBg:y,lightTriggerColor:g,lightTriggerBg:f,bodyBg:v}=t;return{[e]:{position:"relative",minWidth:0,background:n,transition:`all ${r}, background 0s`,"&-has-trigger":{paddingBottom:a},"&-right":{order:1},[`${e}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${i}-menu${i}-menu-inline-collapsed`]:{width:"auto"}},[`&-zero-width ${e}-children`]:{overflow:"hidden"},[`${e}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:a,color:c,lineHeight:P(a),textAlign:"center",background:l,cursor:"pointer",transition:`all ${r}`},[`${e}-zero-width-trigger`]:{position:"absolute",top:d,insetInlineEnd:t.calc(p).mul(-1).equal(),zIndex:1,width:p,height:h,color:c,fontSize:t.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:n,borderRadius:`0 ${P(u)} ${P(u)} 0`,cursor:"pointer",transition:`background ${o} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${o}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:t.calc(p).mul(-1).equal(),borderRadius:`${P(u)} 0 0 ${P(u)}`}},"&-light":{background:y,[`${e}-trigger`]:{color:g,background:f},[`${e}-zero-width-trigger`]:{color:g,background:f,border:`1px solid ${v}`,borderInlineStart:0}}}}},Uo=Ne(["Layout","Sider"],Vo,Dn,{deprecatedTokens:Fn});var qo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const an={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Wo=t=>!Number.isNaN(Number.parseFloat(t))&&isFinite(t),Je=s.createContext({}),Xo=(()=>{let t=0;return(e="")=>(t+=1,`${e}${t}`)})(),Un=s.forwardRef((t,e)=>{const{prefixCls:n,className:r,trigger:o,children:i,defaultCollapsed:a=!1,theme:c="dark",style:l={},collapsible:d=!1,reverseArrow:p=!1,width:h=200,collapsedWidth:u=80,zeroWidthTriggerStyle:y,breakpoint:g,onCollapse:f,onBreakpoint:v}=t,b=qo(t,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:$}=s.useContext(Hn),[E,w]=s.useState("collapsed"in t?t.collapsed:a),[C,B]=s.useState(!1);s.useEffect(()=>{"collapsed"in t&&w(t.collapsed)},[t.collapsed]);const S=(U,oe)=>{"collapsed"in t||w(U),f?.(U,oe)},{getPrefixCls:R,direction:_}=s.useContext(Ce),I=R("layout-sider",n),[z,H,M]=Uo(I),x=s.useRef(null);x.current=U=>{B(U.matches),v?.(U.matches),E!==U.matches&&S(U.matches,"responsive")},s.useEffect(()=>{function U($e){var te;return(te=x.current)===null||te===void 0?void 0:te.call(x,$e)}let oe;return typeof window?.matchMedia<"u"&&g&&g in an&&(oe=window.matchMedia(`screen and (max-width: ${an[g]})`),io(oe,U),U(oe)),()=>{ao(oe,U)}},[g]),s.useEffect(()=>{const U=Xo("ant-sider-");return $.addSider(U),()=>$.removeSider(U)},[]);const T=()=>{S(!E,"clickTrigger")},j=we(b,["collapsed"]),N=E?u:h,A=Wo(N)?`${N}px`:String(N),F=parseFloat(String(u||0))===0?s.createElement("span",{onClick:T,className:V(`${I}-zero-width-trigger`,`${I}-zero-width-trigger-${p?"right":"left"}`),style:y},o||s.createElement(Do,null)):null,K=_==="rtl"==!p,D={expanded:K?s.createElement($t,null):s.createElement(wt,null),collapsed:K?s.createElement(wt,null):s.createElement($t,null)}[E?"collapsed":"expanded"],Q=o!==null?F||s.createElement("div",{className:`${I}-trigger`,onClick:T,style:{width:A}},o||D):null,X=Object.assign(Object.assign({},l),{flex:`0 0 ${A}`,maxWidth:A,minWidth:A,width:A}),ne=V(I,`${I}-${c}`,{[`${I}-collapsed`]:!!E,[`${I}-has-trigger`]:d&&o!==null&&!F,[`${I}-below`]:!!C,[`${I}-zero-width`]:parseFloat(A)===0},r,H,M),ee=s.useMemo(()=>({siderCollapsed:E}),[E]);return z(s.createElement(Je.Provider,{value:ee},s.createElement("aside",Object.assign({className:ne},j,{style:X,ref:e}),s.createElement("div",{className:`${I}-children`},i),d||C&&F?Q:null)))}),Xe=s.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var Go=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const qn=t=>{const{prefixCls:e,className:n,dashed:r}=t,o=Go(t,["prefixCls","className","dashed"]),{getPrefixCls:i}=s.useContext(Ce),a=i("menu",e),c=V({[`${a}-item-divider-dashed`]:!!r},n);return s.createElement(lo,Object.assign({className:c},o))},Wn=t=>{var e;const{className:n,children:r,icon:o,title:i,danger:a,extra:c}=t,{prefixCls:l,firstLevel:d,direction:p,disableMenuItemTitleTooltip:h,inlineCollapsed:u}=s.useContext(Xe),y=E=>{const w=r?.[0],C=s.createElement("span",{className:V(`${l}-title-content`,{[`${l}-title-content-with-extra`]:!!c||c===0})},r);return(!o||s.isValidElement(r)&&r.type==="span")&&r&&E&&d&&typeof w=="string"?s.createElement("div",{className:`${l}-inline-collapsed-noicon`},w.charAt(0)):C},{siderCollapsed:g}=s.useContext(Je);let f=i;typeof i>"u"?f=d?r:"":i===!1&&(f="");const v={title:f};!g&&!u&&(v.title=null,v.open=!1);const b=Me(r).length;let $=s.createElement(co,Object.assign({},we(t,["title","icon","danger"]),{className:V({[`${l}-item-danger`]:a,[`${l}-item-only-child`]:(o?b+1:b)===1},n),title:typeof i=="string"?i:void 0}),Pe(o,{className:V(s.isValidElement(o)?(e=o.props)===null||e===void 0?void 0:e.className:void 0,`${l}-item-icon`)}),y(u));return h||($=s.createElement(Ye,Object.assign({},v,{placement:p==="rtl"?"left":"right",classNames:{root:`${l}-inline-collapsed-tooltip`}}),$)),$};var Ko=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ge=s.createContext(null),Yo=s.forwardRef((t,e)=>{const{children:n}=t,r=Ko(t,["children"]),o=s.useContext(Ge),i=s.useMemo(()=>Object.assign(Object.assign({},o),r),[o,r.prefixCls,r.mode,r.selectable,r.rootClassName]),a=kr(n),c=jr(e,a?Lr(n):null);return s.createElement(Ge.Provider,{value:i},s.createElement(uo,{space:!0},a?s.cloneElement(n,{ref:c}):n))}),Qo=t=>{const{componentCls:e,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:o,lineWidth:i,lineType:a,itemPaddingInline:c}=t;return{[`${e}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${P(i)} ${a} ${o}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${e}-item, ${e}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:c},[`> ${e}-item:hover,
        > ${e}-item-active,
        > ${e}-submenu ${e}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${e}-item, ${e}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${e}-submenu-arrow`]:{display:"none"}}}},Jo=({componentCls:t,menuArrowOffset:e,calc:n})=>({[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${P(n(e).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${P(e)})`}}}}),ln=t=>zr(t),cn=(t,e)=>{const{componentCls:n,itemColor:r,itemSelectedColor:o,subMenuItemSelectedColor:i,groupTitleColor:a,itemBg:c,subMenuItemBg:l,itemSelectedBg:d,activeBarHeight:p,activeBarWidth:h,activeBarBorderWidth:u,motionDurationSlow:y,motionEaseInOut:g,motionEaseOut:f,itemPaddingInline:v,motionDurationMid:b,itemHoverColor:$,lineType:E,colorSplit:w,itemDisabledColor:C,dangerItemColor:B,dangerItemHoverColor:S,dangerItemSelectedColor:R,dangerItemActiveBg:_,dangerItemSelectedBg:I,popupBg:z,itemHoverBg:H,itemActiveBg:M,menuSubMenuBg:x,horizontalItemSelectedColor:T,horizontalItemSelectedBg:j,horizontalItemBorderRadius:N,horizontalItemHoverBg:A}=t;return{[`${n}-${e}, ${n}-${e} > ${n}`]:{color:r,background:c,[`&${n}-root:focus-visible`]:Object.assign({},ln(t)),[`${n}-item`]:{"&-group-title, &-extra":{color:a}},[`${n}-submenu-selected > ${n}-submenu-title`]:{color:i},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},ln(t))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${C} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:$}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:M}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:M}}},[`${n}-item-danger`]:{color:B,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:S}},[`&${n}-item:active`]:{background:_}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:o,[`&${n}-item-danger`]:{color:R},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:d,[`&${n}-item-danger`]:{backgroundColor:I}},[`&${n}-submenu > ${n}`]:{backgroundColor:x},[`&${n}-popup > ${n}`]:{backgroundColor:z},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:z},[`&${n}-horizontal`]:Object.assign(Object.assign({},e==="dark"?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:u,marginTop:t.calc(u).mul(-1).equal(),marginBottom:0,borderRadius:N,"&::after":{position:"absolute",insetInline:v,bottom:0,borderBottom:`${P(p)} solid transparent`,transition:`border-color ${y} ${g}`,content:'""'},"&:hover, &-active, &-open":{background:A,"&::after":{borderBottomWidth:p,borderBottomColor:T}},"&-selected":{color:T,backgroundColor:j,"&:hover":{backgroundColor:j},"&::after":{borderBottomWidth:p,borderBottomColor:T}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${P(u)} ${E} ${w}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:l},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${P(h)} solid ${o}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${b} ${f}`,`opacity ${b} ${f}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:R}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${b} ${g}`,`opacity ${b} ${g}`].join(",")}}}}}},dn=t=>{const{componentCls:e,itemHeight:n,itemMarginInline:r,padding:o,menuArrowSize:i,marginXS:a,itemMarginBlock:c,itemWidth:l,itemPaddingInline:d}=t,p=t.calc(i).add(o).add(a).equal();return{[`${e}-item`]:{position:"relative",overflow:"hidden"},[`${e}-item, ${e}-submenu-title`]:{height:n,lineHeight:P(n),paddingInline:d,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:c,width:l},[`> ${e}-item,
            > ${e}-submenu > ${e}-submenu-title`]:{height:n,lineHeight:P(n)},[`${e}-item-group-list ${e}-submenu-title,
            ${e}-submenu-title`]:{paddingInlineEnd:p}}},Zo=t=>{const{componentCls:e,iconCls:n,itemHeight:r,colorTextLightSolid:o,dropdownWidth:i,controlHeightLG:a,motionEaseOut:c,paddingXL:l,itemMarginInline:d,fontSizeLG:p,motionDurationFast:h,motionDurationSlow:u,paddingXS:y,boxShadowSecondary:g,collapsedWidth:f,collapsedIconSize:v}=t,b={height:r,lineHeight:P(r),listStylePosition:"inside",listStyleType:"disc"};return[{[e]:{"&-inline, &-vertical":Object.assign({[`&${e}-root`]:{boxShadow:"none"}},dn(t))},[`${e}-submenu-popup`]:{[`${e}-vertical`]:Object.assign(Object.assign({},dn(t)),{boxShadow:g})}},{[`${e}-submenu-popup ${e}-vertical${e}-sub`]:{minWidth:i,maxHeight:`calc(100vh - ${P(t.calc(a).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${e}-inline`]:{width:"100%",[`&${e}-root`]:{[`${e}-item, ${e}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${u}`,`background ${u}`,`padding ${h} ${c}`].join(","),[`> ${e}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${e}-sub${e}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${e}-submenu > ${e}-submenu-title`]:b,[`& ${e}-item-group-title`]:{paddingInlineStart:l}},[`${e}-item`]:b}},{[`${e}-inline-collapsed`]:{width:f,[`&${e}-root`]:{[`${e}-item, ${e}-submenu ${e}-submenu-title`]:{[`> ${e}-inline-collapsed-noicon`]:{fontSize:p,textAlign:"center"}}},[`> ${e}-item,
          > ${e}-item-group > ${e}-item-group-list > ${e}-item,
          > ${e}-item-group > ${e}-item-group-list > ${e}-submenu > ${e}-submenu-title,
          > ${e}-submenu > ${e}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${P(t.calc(v).div(2).equal())} - ${P(d)})`,textOverflow:"clip",[`
            ${e}-submenu-arrow,
            ${e}-submenu-expand-icon
          `]:{opacity:0},[`${e}-item-icon, ${n}`]:{margin:0,fontSize:v,lineHeight:P(r),"+ span":{display:"inline-block",opacity:0}}},[`${e}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${e}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:o}},[`${e}-item-group-title`]:Object.assign(Object.assign({},Hr),{paddingInline:y})}}]},un=t=>{const{componentCls:e,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:o,motionEaseOut:i,iconCls:a,iconSize:c,iconMarginInlineEnd:l}=t;return{[`${e}-item, ${e}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${o}`].join(","),[`${e}-item-icon, ${a}`]:{minWidth:c,fontSize:c,transition:[`font-size ${r} ${i}`,`margin ${n} ${o}`,`color ${n}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${n} ${o}`,`margin ${n}`,`color ${n}`].join(",")}},[`${e}-item-icon`]:Object.assign({},Dr()),[`&${e}-item-only-child`]:{[`> ${a}, > ${e}-item-icon`]:{marginInlineEnd:0}}},[`${e}-item-disabled, ${e}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${e}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},pn=t=>{const{componentCls:e,motionDurationSlow:n,motionEaseInOut:r,borderRadius:o,menuArrowSize:i,menuArrowOffset:a}=t;return{[`${e}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:i,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(i).mul(.6).equal(),height:t.calc(i).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:o,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${P(t.calc(a).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${P(a)})`}}}}},es=t=>{const{antCls:e,componentCls:n,fontSize:r,motionDurationSlow:o,motionDurationMid:i,motionEaseInOut:a,paddingXS:c,padding:l,colorSplit:d,lineWidth:p,zIndexPopup:h,borderRadiusLG:u,subMenuItemBorderRadius:y,menuArrowSize:g,menuArrowOffset:f,lineType:v,groupTitleLineHeight:b,groupTitleFontSize:$}=t;return[{"":{[n]:Object.assign(Object.assign({},Yt()),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},In(t)),Yt()),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${o} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${P(c)} ${P(l)}`,fontSize:$,lineHeight:b,transition:`all ${o}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${o} ${a}`,`background ${o} ${a}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${o} ${a}`,`background ${o} ${a}`,`padding ${i} ${a}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${o} ${a}`,`padding ${o} ${a}`].join(",")},[`${n}-title-content`]:{transition:`color ${o}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${e}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:t.padding}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:d,borderStyle:v,borderWidth:0,borderTopWidth:p,marginBlock:p,padding:0,"&-dashed":{borderStyle:"dashed"}}}),un(t)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${P(t.calc(r).mul(2).equal())} ${P(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:h,borderRadius:u,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:u},un(t)),pn(t)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:y},[`${n}-submenu-title::after`]:{transition:`transform ${o} ${a}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),pn(t)),{[`&-inline-collapsed ${n}-submenu-arrow,
        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${P(f)})`},"&::after":{transform:`rotate(45deg) translateX(${P(t.calc(f).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${P(t.calc(g).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${P(t.calc(f).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${P(f)})`}}})},{[`${e}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},ts=t=>{var e,n,r;const{colorPrimary:o,colorError:i,colorTextDisabled:a,colorErrorBg:c,colorText:l,colorTextDescription:d,colorBgContainer:p,colorFillAlter:h,colorFillContent:u,lineWidth:y,lineWidthBold:g,controlItemBgActive:f,colorBgTextHover:v,controlHeightLG:b,lineHeight:$,colorBgElevated:E,marginXXS:w,padding:C,fontSize:B,controlHeightSM:S,fontSizeLG:R,colorTextLightSolid:_,colorErrorHover:I}=t,z=(e=t.activeBarWidth)!==null&&e!==void 0?e:0,H=(n=t.activeBarBorderWidth)!==null&&n!==void 0?n:y,M=(r=t.itemMarginInline)!==null&&r!==void 0?r:t.marginXXS,x=new Qt(_).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:o,horizontalItemHoverColor:o,colorGroupTitle:d,groupTitleColor:d,colorItemTextSelected:o,itemSelectedColor:o,subMenuItemSelectedColor:o,colorItemTextSelectedHorizontal:o,horizontalItemSelectedColor:o,colorItemBg:p,itemBg:p,colorItemBgHover:v,itemHoverBg:v,colorItemBgActive:u,itemActiveBg:f,colorSubItemBg:h,subMenuItemBg:h,colorItemBgSelected:f,itemSelectedBg:f,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:z,colorActiveBarHeight:g,activeBarHeight:g,colorActiveBarBorderSize:y,activeBarBorderWidth:H,colorItemTextDisabled:a,itemDisabledColor:a,colorDangerItemText:i,dangerItemColor:i,colorDangerItemTextHover:i,dangerItemHoverColor:i,colorDangerItemTextSelected:i,dangerItemSelectedColor:i,colorDangerItemBgActive:c,dangerItemActiveBg:c,colorDangerItemBgSelected:c,dangerItemSelectedBg:c,itemMarginInline:M,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:b,groupTitleLineHeight:$,collapsedWidth:b*2,popupBg:E,itemMarginBlock:w,itemPaddingInline:C,horizontalLineHeight:`${b*1.15}px`,iconSize:B,iconMarginInlineEnd:S-B,collapsedIconSize:R,groupTitleFontSize:B,darkItemDisabledColor:new Qt(_).setA(.25).toRgbString(),darkItemColor:x,darkDangerItemColor:i,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:_,darkItemSelectedBg:o,darkDangerItemSelectedBg:i,darkItemHoverBg:"transparent",darkGroupTitleColor:x,darkItemHoverColor:_,darkDangerItemHoverColor:I,darkDangerItemSelectedColor:_,darkDangerItemActiveBg:i,itemWidth:z?`calc(100% + ${H}px)`:`calc(100% - ${M*2}px)`}},ns=(t,e=t,n=!0)=>Ne("Menu",o=>{const{colorBgElevated:i,controlHeightLG:a,fontSize:c,darkItemColor:l,darkDangerItemColor:d,darkItemBg:p,darkSubMenuItemBg:h,darkItemSelectedColor:u,darkItemSelectedBg:y,darkDangerItemSelectedBg:g,darkItemHoverBg:f,darkGroupTitleColor:v,darkItemHoverColor:b,darkItemDisabledColor:$,darkDangerItemHoverColor:E,darkDangerItemSelectedColor:w,darkDangerItemActiveBg:C,popupBg:B,darkPopupBg:S}=o,R=o.calc(c).div(7).mul(5).equal(),_=Ct(o,{menuArrowSize:R,menuHorizontalHeight:o.calc(a).mul(1.15).equal(),menuArrowOffset:o.calc(R).mul(.25).equal(),menuSubMenuBg:i,calc:o.calc,popupBg:B}),I=Ct(_,{itemColor:l,itemHoverColor:b,groupTitleColor:v,itemSelectedColor:u,subMenuItemSelectedColor:u,itemBg:p,popupBg:S,subMenuItemBg:h,itemActiveBg:"transparent",itemSelectedBg:y,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:f,itemDisabledColor:$,dangerItemColor:d,dangerItemHoverColor:E,dangerItemSelectedColor:w,dangerItemActiveBg:C,dangerItemSelectedBg:g,menuSubMenuBg:h,horizontalItemSelectedColor:u,horizontalItemSelectedBg:y});return[es(_),Qo(_),Zo(_),cn(_,"light"),cn(I,"dark"),Jo(_),po(_),We(_,"slide-up"),We(_,"slide-down"),Mn(_,"zoom-big")]},ts,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:n,unitless:{groupTitleLineHeight:!0}})(t,e),Xn=t=>{var e;const{popupClassName:n,icon:r,title:o,theme:i}=t,a=s.useContext(Xe),{prefixCls:c,inlineCollapsed:l,theme:d}=a,p=ho();let h;if(!r)h=l&&!p.length&&o&&typeof o=="string"?s.createElement("div",{className:`${c}-inline-collapsed-noicon`},o.charAt(0)):s.createElement("span",{className:`${c}-title-content`},o);else{const g=s.isValidElement(o)&&o.type==="span";h=s.createElement(s.Fragment,null,Pe(r,{className:V(s.isValidElement(r)?(e=r.props)===null||e===void 0?void 0:e.className:void 0,`${c}-item-icon`)}),g?o:s.createElement("span",{className:`${c}-title-content`},o))}const u=s.useMemo(()=>Object.assign(Object.assign({},a),{firstLevel:!1}),[a]),[y]=An("Menu");return s.createElement(Xe.Provider,{value:u},s.createElement(fo,Object.assign({},we(t,["icon"]),{title:h,popupClassName:V(c,n,`${c}-${i||d}`),popupStyle:Object.assign({zIndex:y},t.popupStyle)})))};var rs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function lt(t){return t===null||t===!1}const os={item:Wn,submenu:Xn,divider:qn},ss=s.forwardRef((t,e)=>{var n;const r=s.useContext(Ge),o=r||{},{getPrefixCls:i,getPopupContainer:a,direction:c,menu:l}=s.useContext(Ce),d=i(),{prefixCls:p,className:h,style:u,theme:y="light",expandIcon:g,_internalDisableMenuItemTitleTooltip:f,inlineCollapsed:v,siderCollapsed:b,rootClassName:$,mode:E,selectable:w,onClick:C,overflowedIndicatorPopupClassName:B}=t,S=rs(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),R=we(S,["collapsedWidth"]);(n=o.validator)===null||n===void 0||n.call(o,{mode:E});const _=Pt((...W)=>{var D;C?.apply(void 0,W),(D=o.onClick)===null||D===void 0||D.call(o)}),I=o.mode||E,z=w??o.selectable,H=v??b,M={horizontal:{motionName:`${d}-slide-up`},inline:go(d),other:{motionName:`${d}-zoom-big`}},x=i("menu",p||o.prefixCls),T=kn(x),[j,N,A]=ns(x,T,!r),F=V(`${x}-${y}`,l?.className,h),K=s.useMemo(()=>{var W,D;if(typeof g=="function"||lt(g))return g||null;if(typeof o.expandIcon=="function"||lt(o.expandIcon))return o.expandIcon||null;if(typeof l?.expandIcon=="function"||lt(l?.expandIcon))return l?.expandIcon||null;const Q=(W=g??o?.expandIcon)!==null&&W!==void 0?W:l?.expandIcon;return Pe(Q,{className:V(`${x}-submenu-expand-icon`,s.isValidElement(Q)?(D=Q.props)===null||D===void 0?void 0:D.className:void 0)})},[g,o?.expandIcon,l?.expandIcon,x]),Y=s.useMemo(()=>({prefixCls:x,inlineCollapsed:H||!1,direction:c,firstLevel:!0,theme:y,mode:I,disableMenuItemTitleTooltip:f}),[x,H,c,f,y]);return j(s.createElement(Ge.Provider,{value:null},s.createElement(Xe.Provider,{value:Y},s.createElement(mo,Object.assign({getPopupContainer:a,overflowedIndicator:s.createElement(kt,null),overflowedIndicatorPopupClassName:V(x,`${x}-${y}`,B),mode:I,selectable:z,onClick:_},R,{inlineCollapsed:H,style:Object.assign(Object.assign({},l?.style),u),className:F,prefixCls:x,direction:c,defaultMotions:M,expandIcon:K,ref:e,rootClassName:V($,N,o.rootClassName,A,T),_internalComponents:os})))))}),Ae=s.forwardRef((t,e)=>{const n=s.useRef(null),r=s.useContext(Je);return s.useImperativeHandle(e,()=>({menu:n.current,focus:o=>{var i;(i=n.current)===null||i===void 0||i.focus(o)}})),s.createElement(ss,Object.assign({ref:n},t,r))});Ae.Item=Wn;Ae.SubMenu=Xn;Ae.Divider=qn;Ae.ItemGroup=yo;const is=t=>{const{componentCls:e,menuCls:n,colorError:r,colorTextLightSolid:o}=t,i=`${n}-item`;return{[`${e}, ${e}-menu-submenu`]:{[`${n} ${i}`]:{[`&${i}-danger:not(${i}-disabled)`]:{color:r,"&:hover":{color:o,backgroundColor:r}}}}}},as=t=>{const{componentCls:e,menuCls:n,zIndexPopup:r,dropdownArrowDistance:o,sizePopupArrow:i,antCls:a,iconCls:c,motionDurationMid:l,paddingBlock:d,fontSize:p,dropdownEdgeChildPadding:h,colorTextDisabled:u,fontSizeIcon:y,controlPaddingHorizontal:g,colorBgElevated:f}=t;return[{[e]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:t.calc(i).div(2).sub(o).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${a}-btn`]:{[`& > ${c}-down, & > ${a}-btn-icon > ${c}-down`]:{fontSize:y}},[`${e}-wrap`]:{position:"relative",[`${a}-btn > ${c}-down`]:{fontSize:y},[`${c}-down::before`]:{transition:`transform ${l}`}},[`${e}-wrap-open`]:{[`${c}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottomLeft,
          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottomLeft,
          &${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottom,
          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottom,
          &${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottomRight,
          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottomRight`]:{animationName:Co},[`&${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-topLeft,
          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-topLeft,
          &${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-top,
          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-top,
          &${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-topRight,
          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-topRight`]:{animationName:xo},[`&${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottomLeft,
          &${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottom,
          &${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottomRight`]:{animationName:vo},[`&${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-topLeft,
          &${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-top,
          &${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-topRight`]:{animationName:bo}}},wo(t,f,{arrowPlacement:{top:!0,bottom:!0}}),{[`${e} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${e}, ${e}-menu-submenu`]:Object.assign(Object.assign({},In(t)),{[n]:Object.assign(Object.assign({padding:h,listStyleType:"none",backgroundColor:f,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary},Jt(t)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${P(d)} ${P(g)}`,color:t.colorTextDescription,transition:`all ${l}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:p,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${l}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:t.padding,marginInlineStart:"auto",fontSize:t.fontSizeSM,color:t.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${P(d)} ${P(g)}`,color:t.colorText,fontWeight:"normal",fontSize:p,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${l}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover}},Jt(t)),{"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:u,cursor:"not-allowed","&:hover":{color:u,backgroundColor:f,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${P(t.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${e}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${e}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorIcon,fontSize:y,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${P(t.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:t.calc(g).add(t.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${e}-menu-submenu-title`]:{[`&, ${e}-menu-submenu-arrow-icon`]:{color:u,backgroundColor:f,cursor:"not-allowed"}},[`${n}-submenu-selected ${e}-menu-submenu-title`]:{color:t.colorPrimary}})})},[We(t,"slide-up"),We(t,"slide-down"),en(t,"move-up"),en(t,"move-down"),Mn(t,"zoom-big")]]},ls=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+50,paddingBlock:(t.controlHeight-t.fontSize*t.lineHeight)/2},$o({contentRadius:t.borderRadiusLG,limitVerticalRadius:!0})),So(t)),cs=Ne("Dropdown",t=>{const{marginXXS:e,sizePopupArrow:n,paddingXXS:r,componentCls:o}=t,i=Ct(t,{menuCls:`${o}-menu`,dropdownArrowDistance:t.calc(n).div(2).add(e).equal(),dropdownEdgeChildPadding:r});return[as(i),is(i)]},ls,{resetStyle:!1}),Ze=t=>{var e;const{menu:n,arrow:r,prefixCls:o,children:i,trigger:a,disabled:c,dropdownRender:l,popupRender:d,getPopupContainer:p,overlayClassName:h,rootClassName:u,overlayStyle:y,open:g,onOpenChange:f,visible:v,onVisibleChange:b,mouseEnterDelay:$=.15,mouseLeaveDelay:E=.1,autoAdjustOverflow:w=!0,placement:C="",overlay:B,transitionName:S,destroyOnHidden:R,destroyPopupOnHide:_}=t,{getPopupContainer:I,getPrefixCls:z,direction:H,dropdown:M}=s.useContext(Ce),x=d||l;Vr();const T=s.useMemo(()=>{const q=z();return S!==void 0?S:C.includes("top")?`${q}-slide-down`:`${q}-slide-up`},[z,C,S]),j=s.useMemo(()=>C?C.includes("Center")?C.slice(0,C.indexOf("Center")):C:H==="rtl"?"bottomRight":"bottomLeft",[C,H]),N=z("dropdown",o),A=kn(N),[F,K,Y]=cs(N,A),[,W]=Fr(),D=s.Children.only(Lo(i)?s.createElement("span",null,i):i),Q=Pe(D,{className:V(`${N}-trigger`,{[`${N}-rtl`]:H==="rtl"},D.props.className),disabled:(e=D.props.disabled)!==null&&e!==void 0?e:c}),X=c?[]:a,ne=!!X?.includes("contextMenu"),[ee,U]=St(!1,{value:g??v}),oe=Pt(q=>{f?.(q,{source:"trigger"}),b?.(q),U(q)}),$e=V(h,u,K,Y,A,M?.className,{[`${N}-rtl`]:H==="rtl"}),te=Eo({arrowPointAtCenter:typeof r=="object"&&r.pointAtCenter,autoAdjustOverflow:w,offset:W.marginXXS,arrowWidth:r?W.sizePopupArrow:0,borderRadius:W.borderRadius}),J=s.useCallback(()=>{n?.selectable&&n?.multiple||(f?.(!1,{source:"menu"}),U(!1))},[n?.selectable,n?.multiple]),de=()=>{let q;return n?.items?q=s.createElement(Ae,Object.assign({},n)):typeof B=="function"?q=B():q=B,x&&(q=x(q)),q=s.Children.only(typeof q=="string"?s.createElement("span",null,q):q),s.createElement(Yo,{prefixCls:`${N}-menu`,rootClassName:V(Y,A),expandIcon:s.createElement("span",{className:`${N}-menu-submenu-arrow`},H==="rtl"?s.createElement(wt,{className:`${N}-menu-submenu-arrow-icon`}):s.createElement($t,{className:`${N}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:J,validator:({mode:ue})=>{}},q)},[ke,re]=An("Dropdown",y?.zIndex);let ye=s.createElement(Oo,Object.assign({alignPoint:ne},we(t,["rootClassName"]),{mouseEnterDelay:$,mouseLeaveDelay:E,visible:ee,builtinPlacements:te,arrow:!!r,overlayClassName:$e,prefixCls:N,getPopupContainer:p||I,transitionName:T,trigger:X,overlay:de,placement:j,onVisibleChange:oe,overlayStyle:Object.assign(Object.assign(Object.assign({},M?.style),y),{zIndex:ke}),autoDestroy:R??_}),Q);return ke&&(ye=s.createElement(_o.Provider,{value:re},ye)),F(ye)},ds=oo(Ze,"align",void 0,"dropdown",t=>t),us=t=>s.createElement(ds,Object.assign({},t),s.createElement("span",null));Ze._InternalPanelDoNotUseOrYouWillBeFired=us;function hn(t){return["small","middle","large"].includes(t)}function fn(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const Gn=Ur.createContext({latestIndex:0}),ps=Gn.Provider,hs=({className:t,index:e,children:n,split:r,style:o})=>{const{latestIndex:i}=s.useContext(Gn);return n==null?null:s.createElement(s.Fragment,null,s.createElement("div",{className:t,style:o},n),e<i&&r&&s.createElement("span",{className:`${t}-split`},r))};var fs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ms=s.forwardRef((t,e)=>{var n;const{getPrefixCls:r,direction:o,size:i,className:a,style:c,classNames:l,styles:d}=Mt("space"),{size:p=i??"small",align:h,className:u,rootClassName:y,children:g,direction:f="horizontal",prefixCls:v,split:b,style:$,wrap:E=!1,classNames:w,styles:C}=t,B=fs(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[S,R]=Array.isArray(p)?p:[p,p],_=hn(R),I=hn(S),z=fn(R),H=fn(S),M=Me(g,{keepEmpty:!0}),x=h===void 0&&f==="horizontal"?"center":h,T=r("space",v),[j,N,A]=To(T),F=V(T,a,N,`${T}-${f}`,{[`${T}-rtl`]:o==="rtl",[`${T}-align-${x}`]:x,[`${T}-gap-row-${R}`]:_,[`${T}-gap-col-${S}`]:I},u,y,A),K=V(`${T}-item`,(n=w?.item)!==null&&n!==void 0?n:l.item);let Y=0;const W=M.map((X,ne)=>{var ee;X!=null&&(Y=ne);const U=X?.key||`${K}-${ne}`;return s.createElement(hs,{className:K,key:U,index:ne,split:b,style:(ee=C?.item)!==null&&ee!==void 0?ee:d.item},X)}),D=s.useMemo(()=>({latestIndex:Y}),[Y]);if(M.length===0)return null;const Q={};return E&&(Q.flexWrap="wrap"),!I&&H&&(Q.columnGap=S),!_&&z&&(Q.rowGap=R),j(s.createElement("div",Object.assign({ref:e,className:F,style:Object.assign(Object.assign(Object.assign({},Q),c),$)},B),s.createElement(ps,{value:D},W)))}),Kn=ms;Kn.Compact=Io;var gs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Yn=t=>{const{getPopupContainer:e,getPrefixCls:n,direction:r}=s.useContext(Ce),{prefixCls:o,type:i="default",danger:a,disabled:c,loading:l,onClick:d,htmlType:p,children:h,className:u,menu:y,arrow:g,autoFocus:f,overlay:v,trigger:b,align:$,open:E,onOpenChange:w,placement:C,getPopupContainer:B,href:S,icon:R=s.createElement(kt,null),title:_,buttonsRender:I=te=>te,mouseEnterDelay:z,mouseLeaveDelay:H,overlayClassName:M,overlayStyle:x,destroyOnHidden:T,destroyPopupOnHide:j,dropdownRender:N,popupRender:A}=t,F=gs(t,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyOnHidden","destroyPopupOnHide","dropdownRender","popupRender"]),K=n("dropdown",o),Y=`${K}-button`,D={menu:y,arrow:g,autoFocus:f,align:$,disabled:c,trigger:c?[]:b,onOpenChange:w,getPopupContainer:B||e,mouseEnterDelay:z,mouseLeaveDelay:H,overlayClassName:M,overlayStyle:x,destroyOnHidden:T,popupRender:A||N},{compactSize:Q,compactItemClassnames:X}=Bo(K,r),ne=V(Y,X,u);"destroyPopupOnHide"in t&&(D.destroyPopupOnHide=j),"overlay"in t&&(D.overlay=v),"open"in t&&(D.open=E),"placement"in t?D.placement=C:D.placement=r==="rtl"?"bottomLeft":"bottomRight";const ee=s.createElement(he,{type:i,danger:a,disabled:c,loading:l,onClick:d,htmlType:p,href:S,title:_},h),U=s.createElement(he,{type:i,danger:a,icon:R}),[oe,$e]=I([ee,U]);return s.createElement(Kn.Compact,Object.assign({className:ne,size:Q,block:!0},F),oe,s.createElement(Ze,Object.assign({},D),$e))};Yn.__ANT_BUTTON=!0;const Qn=Ze;Qn.Button=Yn;var ys={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},bs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:ys}))},vs=s.forwardRef(bs);function xs(t,e,n){return typeof n=="boolean"?n:t.length?!0:Me(e).some(o=>o.type===Un)}var Jn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function et({suffixCls:t,tagName:e,displayName:n}){return r=>s.forwardRef((i,a)=>s.createElement(r,Object.assign({ref:a,suffixCls:t,tagName:e},i)))}const zt=s.forwardRef((t,e)=>{const{prefixCls:n,suffixCls:r,className:o,tagName:i}=t,a=Jn(t,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:c}=s.useContext(Ce),l=c("layout",n),[d,p,h]=Vn(l),u=r?`${l}-${r}`:l;return d(s.createElement(i,Object.assign({className:V(n||u,o,p,h),ref:e},a)))}),Cs=s.forwardRef((t,e)=>{const{direction:n}=s.useContext(Ce),[r,o]=s.useState([]),{prefixCls:i,className:a,rootClassName:c,children:l,hasSider:d,tagName:p,style:h}=t,u=Jn(t,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),y=we(u,["suffixCls"]),{getPrefixCls:g,className:f,style:v}=Mt("layout"),b=g("layout",i),$=xs(r,l,d),[E,w,C]=Vn(b),B=V(b,{[`${b}-has-sider`]:$,[`${b}-rtl`]:n==="rtl"},f,a,c,w,C),S=s.useMemo(()=>({siderHook:{addSider:R=>{o(_=>[].concat(At(_),[R]))},removeSider:R=>{o(_=>_.filter(I=>I!==R))}}}),[]);return E(s.createElement(Hn.Provider,{value:S},s.createElement(p,Object.assign({ref:e,className:B,style:Object.assign(Object.assign({},v),h)},y),l)))}),ws=et({tagName:"div",displayName:"Layout"})(Cs),$s=et({suffixCls:"header",tagName:"header",displayName:"Header"})(zt),Ss=et({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(zt),Es=et({suffixCls:"content",tagName:"main",displayName:"Content"})(zt),be=ws;be.Header=$s;be.Footer=Ss;be.Content=Es;be.Sider=Un;be._InternalSiderContext=Je;const Os=(t,e=!1)=>e&&t==null?[]:Array.isArray(t)?t:[t];var _s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Ts=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:_s}))},Is=s.forwardRef(Ts),Bs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"},Rs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Bs}))},Ns=s.forwardRef(Rs),Ps={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Ms=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Ps}))},As=s.forwardRef(Ms),ks={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},js=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:ks}))},mn=s.forwardRef(js),Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},zs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Ls}))},Hs=s.forwardRef(zs),Ds={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Fs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Ds}))},Vs=s.forwardRef(Fs),Us={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},qs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Us}))},Ws=s.forwardRef(qs),Xs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},Gs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Xs}))},Ks=s.forwardRef(Gs),Ys={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Qs=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Ys}))},Js=s.forwardRef(Qs),Zs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},ei=function(e,n){return s.createElement(ce,le({},e,{ref:n,icon:Zs}))},gn=s.forwardRef(ei);const ti=(t,e,n,r)=>{const{titleMarginBottom:o,fontWeightStrong:i}=r;return{marginBottom:o,color:n,fontWeight:i,fontSize:t,lineHeight:e}},ni=t=>{const e=[1,2,3,4,5],n={};return e.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=ti(t[`fontSizeHeading${r}`],t[`lineHeightHeading${r}`],t.colorTextHeading,t)}),n},ri=t=>{const{componentCls:e}=t;return{"a&, a":Object.assign(Object.assign({},Bn(t)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:t.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},oi=t=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:qr[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:t.fontWeightStrong},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:t.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),si=t=>{const{componentCls:e,paddingSM:n}=t,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:t.calc(t.paddingSM).mul(-1).equal(),marginTop:t.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${P(r)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:t.calc(t.marginXS).add(2).equal(),insetBlockEnd:t.marginXS,color:t.colorIcon,fontWeight:"normal",fontSize:t.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},ii=t=>({[`${t.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:t.colorSuccess}},[`${t.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),ai=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),li=t=>{const{componentCls:e,titleMarginTop:n}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorText,wordBreak:"break-word",lineHeight:t.lineHeight,[`&${e}-secondary`]:{color:t.colorTextDescription},[`&${e}-success`]:{color:t.colorSuccessText},[`&${e}-warning`]:{color:t.colorWarningText},[`&${e}-danger`]:{color:t.colorErrorText,"a&:active, a&:focus":{color:t.colorErrorTextActive},"a&:hover":{color:t.colorErrorTextHover}},[`&${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},ni(t)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),oi(t)),ri(t)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Bn(t)),{marginInlineStart:t.marginXXS})}),si(t)),ii(t)),ai()),{"&-rtl":{direction:"rtl"}})}},ci=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Zn=Ne("Typography",li,ci),di=t=>{const{prefixCls:e,"aria-label":n,className:r,style:o,direction:i,maxLength:a,autoSize:c=!0,value:l,onSave:d,onCancel:p,onEnd:h,component:u,enterIcon:y=s.createElement(Vs,null)}=t,g=s.useRef(null),f=s.useRef(!1),v=s.useRef(null),[b,$]=s.useState(l);s.useEffect(()=>{$(l)},[l]),s.useEffect(()=>{var x;if(!((x=g.current)===null||x===void 0)&&x.resizableTextArea){const{textArea:T}=g.current.resizableTextArea;T.focus();const{length:j}=T.value;T.setSelectionRange(j,j)}},[]);const E=({target:x})=>{$(x.value.replace(/[\n\r]/g,""))},w=()=>{f.current=!0},C=()=>{f.current=!1},B=({keyCode:x})=>{f.current||(v.current=x)},S=()=>{d(b.trim())},R=({keyCode:x,ctrlKey:T,altKey:j,metaKey:N,shiftKey:A})=>{v.current!==x||f.current||T||j||N||A||(x===tn.ENTER?(S(),h?.()):x===tn.ESC&&p())},_=()=>{S()},[I,z,H]=Zn(e),M=V(e,`${e}-edit-content`,{[`${e}-rtl`]:i==="rtl",[`${e}-${u}`]:!!u},r,z,H);return I(s.createElement("div",{className:M,style:o},s.createElement(Ro,{ref:g,maxLength:a,value:b,onChange:E,onKeyDown:B,onKeyUp:R,onCompositionStart:w,onCompositionEnd:C,onBlur:_,"aria-label":n,rows:1,autoSize:c}),y!==null?Pe(y,{className:`${e}-edit-content-confirm`}):null))};var ct,yn;function ui(){return yn||(yn=1,ct=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(o){t.addRange(o)}),e&&e.focus()}}),ct}var dt,bn;function pi(){if(bn)return dt;bn=1;var t=ui(),e={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(i){var a=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return i.replace(/#{\s*key\s*}/g,a)}function o(i,a){var c,l,d,p,h,u,y=!1;a||(a={}),c=a.debug||!1;try{d=t(),p=document.createRange(),h=document.getSelection(),u=document.createElement("span"),u.textContent=i,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(f){if(f.stopPropagation(),a.format)if(f.preventDefault(),typeof f.clipboardData>"u"){c&&console.warn("unable to use e.clipboardData"),c&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var v=e[a.format]||e.default;window.clipboardData.setData(v,i)}else f.clipboardData.clearData(),f.clipboardData.setData(a.format,i);a.onCopy&&(f.preventDefault(),a.onCopy(f.clipboardData))}),document.body.appendChild(u),p.selectNodeContents(u),h.addRange(p);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");y=!0}catch(f){c&&console.error("unable to copy using execCommand: ",f),c&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",i),a.onCopy&&a.onCopy(window.clipboardData),y=!0}catch(v){c&&console.error("unable to copy using clipboardData: ",v),c&&console.error("falling back to prompt"),l=r("message"in a?a.message:n),window.prompt(l,i)}}finally{h&&(typeof h.removeRange=="function"?h.removeRange(p):h.removeAllRanges()),u&&document.body.removeChild(u),d()}return y}return dt=o,dt}var hi=pi();const fi=Wr(hi);var mi=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(p){try{d(r.next(p))}catch(h){a(h)}}function l(p){try{d(r.throw(p))}catch(h){a(h)}}function d(p){p.done?i(p.value):o(p.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};const gi=({copyConfig:t,children:e})=>{const[n,r]=s.useState(!1),[o,i]=s.useState(!1),a=s.useRef(null),c=()=>{a.current&&clearTimeout(a.current)},l={};t.format&&(l.format=t.format),s.useEffect(()=>c,[]);const d=Pt(p=>mi(void 0,void 0,void 0,function*(){var h;p?.preventDefault(),p?.stopPropagation(),i(!0);try{const u=typeof t.text=="function"?yield t.text():t.text;fi(u||Os(e,!0).join("")||"",l),i(!1),r(!0),c(),a.current=setTimeout(()=>{r(!1)},3e3),(h=t.onCopy)===null||h===void 0||h.call(t,p)}catch(u){throw i(!1),u}}));return{copied:n,copyLoading:o,onClick:d}};function ut(t,e){return s.useMemo(()=>{const n=!!t;return[n,Object.assign(Object.assign({},e),n&&typeof t=="object"?t:null)]},[t])}const yi=t=>{const e=s.useRef(void 0);return s.useEffect(()=>{e.current=t}),e.current},bi=(t,e,n)=>s.useMemo(()=>t===!0?{title:e??n}:s.isValidElement(t)?{title:t}:typeof t=="object"?Object.assign({title:e??n},t):{title:t},[t,e,n]);var vi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const er=s.forwardRef((t,e)=>{const{prefixCls:n,component:r="article",className:o,rootClassName:i,setContentRef:a,children:c,direction:l,style:d}=t,p=vi(t,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:h,direction:u,className:y,style:g}=Mt("typography"),f=l??u,v=a?Rn(e,a):e,b=h("typography",n),[$,E,w]=Zn(b),C=V(b,y,{[`${b}-rtl`]:f==="rtl"},o,i,E,w),B=Object.assign(Object.assign({},g),d);return $(s.createElement(r,Object.assign({className:C,style:B,ref:v},p),c))});function vn(t){return t===!1?[!1,!1]:Array.isArray(t)?t:[t]}function pt(t,e,n){return t===!0||t===void 0?e:t||n&&e}function xi(t){const e=document.createElement("em");t.appendChild(e);const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return t.removeChild(e),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}const Ht=t=>["string","number"].includes(typeof t),Ci=({prefixCls:t,copied:e,locale:n,iconOnly:r,tooltips:o,icon:i,tabIndex:a,onCopy:c,loading:l})=>{const d=vn(o),p=vn(i),{copied:h,copy:u}=n??{},y=e?h:u,g=pt(d[e?1:0],y),f=typeof g=="string"?g:y;return s.createElement(Ye,{title:g,getPopupContainer:v=>v.parentNode},s.createElement("button",{type:"button",className:V(`${t}-copy`,{[`${t}-copy-success`]:e,[`${t}-copy-icon-only`]:r}),onClick:c,"aria-label":f,tabIndex:a},e?pt(p[1],s.createElement(Nn,null),!0):pt(p[0],l?s.createElement(No,null):s.createElement(As,null),!0)))},Le=s.forwardRef(({style:t,children:e},n)=>{const r=s.useRef(null);return s.useImperativeHandle(n,()=>({isExceed:()=>{const o=r.current;return o.scrollHeight>o.clientHeight},getHeight:()=>r.current.clientHeight})),s.createElement("span",{"aria-hidden":!0,ref:r,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},t)},e)}),wi=t=>t.reduce((e,n)=>e+(Ht(n)?String(n).length:1),0);function xn(t,e){let n=0;const r=[];for(let o=0;o<t.length;o+=1){if(n===e)return r;const i=t[o],c=Ht(i)?String(i).length:1,l=n+c;if(l>e){const d=e-n;return r.push(String(i).slice(0,d)),r}r.push(i),n=l}return t}const ht=0,ft=1,mt=2,gt=3,Cn=4,ze={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function $i(t){const{enableMeasure:e,width:n,text:r,children:o,rows:i,expanded:a,miscDeps:c,onEllipsis:l}=t,d=s.useMemo(()=>Me(r),[r]),p=s.useMemo(()=>wi(d),[r]),h=s.useMemo(()=>o(d,!1),[r]),[u,y]=s.useState(null),g=s.useRef(null),f=s.useRef(null),v=s.useRef(null),b=s.useRef(null),$=s.useRef(null),[E,w]=s.useState(!1),[C,B]=s.useState(ht),[S,R]=s.useState(0),[_,I]=s.useState(null);Se(()=>{B(e&&n&&p?ft:ht)},[n,r,i,e,d]),Se(()=>{var x,T,j,N;if(C===ft){B(mt);const A=f.current&&getComputedStyle(f.current).whiteSpace;I(A)}else if(C===mt){const A=!!(!((x=v.current)===null||x===void 0)&&x.isExceed());B(A?gt:Cn),y(A?[0,p]:null),w(A);const F=((T=v.current)===null||T===void 0?void 0:T.getHeight())||0,K=i===1?0:((j=b.current)===null||j===void 0?void 0:j.getHeight())||0,Y=((N=$.current)===null||N===void 0?void 0:N.getHeight())||0,W=Math.max(F,K+Y);R(W+1),l(A)}},[C]);const z=u?Math.ceil((u[0]+u[1])/2):0;Se(()=>{var x;const[T,j]=u||[0,0];if(T!==j){const A=(((x=g.current)===null||x===void 0?void 0:x.getHeight())||0)>S;let F=z;j-T===1&&(F=A?T:j),y(A?[T,F]:[F,j])}},[u,z]);const H=s.useMemo(()=>{if(!e)return o(d,!1);if(C!==gt||!u||u[0]!==u[1]){const x=o(d,!1);return[Cn,ht].includes(C)?x:s.createElement("span",{style:Object.assign(Object.assign({},ze),{WebkitLineClamp:i})},x)}return o(a?d:xn(d,u[0]),E)},[a,C,u,d].concat(At(c))),M={width:n,margin:0,padding:0,whiteSpace:_==="nowrap"?"normal":"inherit"};return s.createElement(s.Fragment,null,H,C===mt&&s.createElement(s.Fragment,null,s.createElement(Le,{style:Object.assign(Object.assign(Object.assign({},M),ze),{WebkitLineClamp:i}),ref:v},h),s.createElement(Le,{style:Object.assign(Object.assign(Object.assign({},M),ze),{WebkitLineClamp:i-1}),ref:b},h),s.createElement(Le,{style:Object.assign(Object.assign(Object.assign({},M),ze),{WebkitLineClamp:1}),ref:$},o([],!0))),C===gt&&u&&u[0]!==u[1]&&s.createElement(Le,{style:Object.assign(Object.assign({},M),{top:400}),ref:g},o(xn(d,z),!0)),C===ft&&s.createElement("span",{style:{whiteSpace:"inherit"},ref:f}))}const Si=({enableEllipsis:t,isEllipsis:e,children:n,tooltipProps:r})=>!r?.title||!t?n:s.createElement(Ye,Object.assign({open:e?void 0:!1},r),n);var Ei=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Oi({mark:t,code:e,underline:n,delete:r,strong:o,keyboard:i,italic:a},c){let l=c;function d(p,h){h&&(l=s.createElement(p,{},l))}return d("strong",o),d("u",n),d("del",r),d("code",e),d("mark",t),d("kbd",i),d("i",a),l}const _i="...",wn=["delete","mark","code","underline","strong","keyboard","italic"],tt=s.forwardRef((t,e)=>{var n;const{prefixCls:r,className:o,style:i,type:a,disabled:c,children:l,ellipsis:d,editable:p,copyable:h,component:u,title:y}=t,g=Ei(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:f,direction:v}=s.useContext(Ce),[b]=Po("Text"),$=s.useRef(null),E=s.useRef(null),w=f("typography",r),C=we(g,wn),[B,S]=ut(p),[R,_]=St(!1,{value:S.editing}),{triggerType:I=["icon"]}=S,z=O=>{var L;O&&((L=S.onStart)===null||L===void 0||L.call(S)),_(O)},H=yi(R);Se(()=>{var O;!R&&H&&((O=E.current)===null||O===void 0||O.focus())},[R]);const M=O=>{O?.preventDefault(),z(!0)},x=O=>{var L;(L=S.onChange)===null||L===void 0||L.call(S,O),z(!1)},T=()=>{var O;(O=S.onCancel)===null||O===void 0||O.call(S),z(!1)},[j,N]=ut(h),{copied:A,copyLoading:F,onClick:K}=gi({copyConfig:N,children:l}),[Y,W]=s.useState(!1),[D,Q]=s.useState(!1),[X,ne]=s.useState(!1),[ee,U]=s.useState(!1),[oe,$e]=s.useState(!0),[te,J]=ut(d,{expandable:!1,symbol:O=>O?b?.collapse:b?.expand}),[de,ke]=St(J.defaultExpanded||!1,{value:J.expanded}),re=te&&(!de||J.expandable==="collapsible"),{rows:ye=1}=J,q=s.useMemo(()=>re&&(J.suffix!==void 0||J.onEllipsis||J.expandable||B||j),[re,J,B,j]);Se(()=>{te&&!q&&(W(sn("webkitLineClamp")),Q(sn("textOverflow")))},[q,te]);const[ue,$r]=s.useState(re),Xt=s.useMemo(()=>q?!1:ye===1?D:Y,[q,D,Y]);Se(()=>{$r(Xt&&re)},[Xt,re]);const Gt=re&&(ue?ee:X),Sr=re&&ye===1&&ue,st=re&&ye>1&&ue,Er=(O,L)=>{var fe;ke(L.expanded),(fe=J.onExpand)===null||fe===void 0||fe.call(J,O,L)},[Kt,Or]=s.useState(0),_r=({offsetWidth:O})=>{Or(O)},Tr=O=>{var L;ne(O),X!==O&&((L=J.onEllipsis)===null||L===void 0||L.call(J,O))};s.useEffect(()=>{const O=$.current;if(te&&ue&&O){const L=xi(O);ee!==L&&U(L)}},[te,ue,l,st,oe,Kt]),s.useEffect(()=>{const O=$.current;if(typeof IntersectionObserver>"u"||!O||!ue||!re)return;const L=new IntersectionObserver(()=>{$e(!!O.offsetParent)});return L.observe(O),()=>{L.disconnect()}},[ue,re]);const it=bi(J.tooltip,S.text,l),je=s.useMemo(()=>{if(!(!te||ue))return[S.text,l,y,it.title].find(Ht)},[te,ue,y,it.title,Gt]);if(R)return s.createElement(di,{value:(n=S.text)!==null&&n!==void 0?n:typeof l=="string"?l:"",onSave:x,onCancel:T,onEnd:S.onEnd,prefixCls:w,className:o,style:i,direction:v,component:u,maxLength:S.maxLength,autoSize:S.autoSize,enterIcon:S.enterIcon});const Ir=()=>{const{expandable:O,symbol:L}=J;return O?s.createElement("button",{type:"button",key:"expand",className:`${w}-${de?"collapse":"expand"}`,onClick:fe=>Er(fe,{expanded:!de}),"aria-label":de?b.collapse:b?.expand},typeof L=="function"?L(de):L):null},Br=()=>{if(!B)return;const{icon:O,tooltip:L,tabIndex:fe}=S,at=Me(L)[0]||b?.edit,Mr=typeof at=="string"?at:"";return I.includes("icon")?s.createElement(Ye,{key:"edit",title:L===!1?"":at},s.createElement("button",{type:"button",ref:E,className:`${w}-edit`,onClick:M,"aria-label":Mr,tabIndex:fe},O||s.createElement(Hs,{role:"button"}))):null},Rr=()=>j?s.createElement(Ci,Object.assign({key:"copy"},N,{prefixCls:w,copied:A,locale:b,onCopy:K,loading:F,iconOnly:l==null})):null,Nr=O=>[O&&Ir(),Br(),Rr()],Pr=O=>[O&&!de&&s.createElement("span",{"aria-hidden":!0,key:"ellipsis"},_i),J.suffix,Nr(O)];return s.createElement(Mo,{onResize:_r,disabled:!re},O=>s.createElement(Si,{tooltipProps:it,enableEllipsis:re,isEllipsis:Gt},s.createElement(er,Object.assign({className:V({[`${w}-${a}`]:a,[`${w}-disabled`]:c,[`${w}-ellipsis`]:te,[`${w}-ellipsis-single-line`]:Sr,[`${w}-ellipsis-multiple-line`]:st},o),prefixCls:r,style:Object.assign(Object.assign({},i),{WebkitLineClamp:st?ye:void 0}),component:u,ref:Rn(O,$,e),direction:v,onClick:I.includes("text")?M:void 0,"aria-label":je?.toString(),title:y},C),s.createElement($i,{enableMeasure:re&&!ue,text:l,rows:ye,width:Kt,onEllipsis:Tr,expanded:de,miscDeps:[A,de,F,B,j,b].concat(At(wn.map(L=>t[L])))},(L,fe)=>Oi(t,s.createElement(s.Fragment,null,L.length>0&&fe&&!de&&je?s.createElement("span",{key:"show-content","aria-hidden":!0},L):L,Pr(fe)))))))});var Ti=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ii=s.forwardRef((t,e)=>{var{ellipsis:n,rel:r}=t,o=Ti(t,["ellipsis","rel"]);const i=Object.assign(Object.assign({},o),{rel:r===void 0&&o.target==="_blank"?"noopener noreferrer":r});return delete i.navigate,s.createElement(tt,Object.assign({},i,{ref:e,ellipsis:!!n,component:"a"}))}),Bi=s.forwardRef((t,e)=>s.createElement(tt,Object.assign({ref:e},t,{component:"div"})));var Ri=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ni=(t,e)=>{var{ellipsis:n}=t,r=Ri(t,["ellipsis"]);const o=s.useMemo(()=>n&&typeof n=="object"?we(n,["expandable","rows"]):n,[n]);return s.createElement(tt,Object.assign({ref:e},r,{ellipsis:o,component:"span"}))},Pi=s.forwardRef(Ni);var Mi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ai=[1,2,3,4,5],ki=s.forwardRef((t,e)=>{const{level:n=1}=t,r=Mi(t,["level"]),o=Ai.includes(n)?`h${n}`:"h1";return s.createElement(tt,Object.assign({ref:e},r,{component:o}))}),_e=er;_e.Text=Pi;_e.Link=Ii;_e.Title=ki;_e.Paragraph=Bi;var ji=class extends Xr{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:Zt()})}getOptimisticResult(t){return t.behavior=Zt(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){const{state:n}=t,r=super.createResult(t,e),{isFetching:o,isRefetching:i,isError:a,isRefetchError:c}=r,l=n.fetchMeta?.fetchMore?.direction,d=a&&l==="forward",p=o&&l==="forward",h=a&&l==="backward",u=o&&l==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Kr(e,n.data),hasPreviousPage:Gr(e,n.data),isFetchNextPageError:d,isFetchingNextPage:p,isFetchPreviousPageError:h,isFetchingPreviousPage:u,isRefetchError:c&&!d&&!h,isRefetching:i&&!p&&!u}}};function Li(t,e){return Yr(t,ji)}const zi=({id:t})=>{const{error:e,data:n,isLoading:r}=Qr({queryKey:["chats-details",t],queryFn:async()=>await so.getChatById(t)});return{error:e?e.message:null,data:n,loading:r}},Hi=({placeholder:t,className:e,route:n})=>{const r=Jr(),o=()=>{r(n||-1)};return m.jsx(he,{type:"primary",onClick:o,className:e,style:{cursor:"pointer"},children:t||"Geri Qayıt"})},Di=s.memo(Hi),{Header:Fi}=be,{Text:Vi}=_e,Ui=({chatId:t})=>{const{loading:e,error:n,data:r}=zi({id:t});return e?m.jsx("div",{children:"loading..."}):n||!r?m.jsx("div",{children:"error..."}):m.jsxs(Fi,{className:"flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700",children:[m.jsx(Di,{placeholder:m.jsx(Is,{}),route:"/"}),m.jsx(Vi,{className:"text-xl",children:r.name})]})},qi=s.memo(Ui);var Oe=(t=>(t.TEXT="text",t.MEDIA="media",t.VOICE="voice",t))(Oe||{});const tr=s.createContext(null),Wi=s.memo(({children:t,value:e})=>m.jsx(tr.Provider,{value:e,children:t})),nr=()=>{const t=s.useContext(tr);if(!t)throw new Error("useGetChatMessagesContract must be used within a GetChatMessagesContractProvider");return t},rr=s.createContext(null),Xi=s.memo(({children:t,...e})=>m.jsx(rr.Provider,{value:e,children:t})),or=()=>{const t=s.useContext(rr);if(!t)throw new Error("useMeContract must be used within a MeContractProvider");return t};var ie=(t=>(t.IMAGE="image",t.VIDEO="video",t.DOCUMENT="document",t.AUDIO="audio",t.VOICE="voice",t))(ie||{});const Gi=({media:t})=>{const e=r=>{try{const i=new URL(r).pathname.split("/");return decodeURIComponent(i[i.length-1])}catch(o){return console.log("Error parsing URL:",o),"file"}},n=`http://localhost:8080${t.url}`;switch(t.type){case ie.IMAGE:return m.jsx("img",{src:n,alt:"image content",className:"max-w-full max-h-80 rounded-lg object-cover"});case ie.VIDEO:return m.jsx("video",{src:n,controls:!0,className:"max-w-full max-h-80 rounded-lg"});case ie.AUDIO:return m.jsx("audio",{src:n,controls:!0,className:"w-full"});case ie.DOCUMENT:return m.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:[m.jsx(vs,{className:"mr-2 text-2xl"}),m.jsx("span",{className:"truncate",children:e(t.url)})]});default:return null}},Ki=s.memo(Gi),Et=t=>{const e=Math.floor(t/60),n=t%60,r=String(e).padStart(2,"0"),o=String(n).padStart(2,"0");return`${r}:${o}`},Yi=({url:t})=>{const e=s.useRef(null),[n,r]=s.useState(!1),[o,i]=s.useState(0),[a,c]=s.useState(0),l=`${t}`,d=()=>{const h=e.current;h&&(n?h.pause():h.play(),r(!n))};s.useEffect(()=>{const h=e.current;if(!h)return;const u=()=>{h&&isFinite(h.duration)&&i(h.duration)},y=()=>c(h.currentTime),g=()=>r(!1);return h.addEventListener("loadedmetadata",u),h.addEventListener("durationchange",u),h.addEventListener("timeupdate",y),h.addEventListener("ended",g),h.readyState>0&&u(),()=>{h.removeEventListener("loadedmetadata",u),h.removeEventListener("durationchange",u),h.removeEventListener("timeupdate",y),h.removeEventListener("ended",g)}},[l]);const p=o>0?a/o*100:0;return m.jsxs("div",{className:"flex items-center w-full max-w-xs gap-2",children:[m.jsx("audio",{ref:e,src:l,preload:"metadata"}),m.jsx(he,{type:"text",shape:"circle",onClick:d,icon:n?m.jsx(Ks,{}):m.jsx(Js,{}),className:"text-2xl"}),m.jsx("div",{className:"flex-grow bg-gray-500 bg-opacity-50 h-1 rounded-full",children:m.jsx("div",{style:{width:`${p}%`},className:"bg-blue-400 h-1 rounded-full"})}),m.jsxs("span",{className:"text-xs font-mono w-20 text-right whitespace-nowrap",children:[Et(Math.floor(a))," / ",Et(Math.floor(o))]})]})},Qi=s.memo(Yi);class Ji{constructor(e={}){this.handlers=new Map,this.wildcardHandlers=new Set,this.config={onError:n=>console.error(`EventBus error: ${n.message}`),maxListeners:20,...e}}on(e,n){this.validateHandler(n),this.handlers.has(e)||this.handlers.set(e,new Set);const r=this.handlers.get(e);return this.config.maxListeners&&r.size>=this.config.maxListeners&&console.warn(`Event "${String(e)}" has exceeded the maximum listeners (${this.config.maxListeners})`),r.add(n),()=>this.off(e,n)}once(e,n){const r=o=>{try{n(o)}finally{this.off(e,r)}};return this.on(e,r)}off(e,n){if(!this.handlers.has(e))return;const r=this.handlers.get(e);r.delete(n),r.size===0&&this.handlers.delete(e)}offAll(e){e?this.handlers.delete(e):(this.handlers.clear(),this.wildcardHandlers.clear())}emit(e,n){this.handlers.has(e)&&new Set(this.handlers.get(e)).forEach(o=>{try{o(n)}catch(i){this.config.onError?.(i,e,n)}}),this.wildcardHandlers.forEach(r=>{try{r(e,n)}catch(o){this.config.onError?.(o,e,n)}})}onAll(e){return this.wildcardHandlers.add(e),()=>{this.wildcardHandlers.delete(e)}}all(){return new Map(this.handlers)}validateHandler(e){if(typeof e!="function")throw new Error("Event handler must be a function")}}const Dt=t=>new Ji(t),$n=Dt(),sr=s.createContext(null),Zi=({children:t,eventBus:e,config:n})=>{const r=s.useMemo(()=>e||(n?Dt(n):$n),[e,n,$n]),o=s.useMemo(()=>({eventBus:r}),[r]);return m.jsx(sr.Provider,{value:o,children:t})},ea=s.memo(Zi),ta=()=>{const t=s.useContext(sr);if(!t)throw new Error("useEventBusContext must be used within an EventBusProvider");return t},ir=t=>{try{const e=ta();return t?.eventBus||e.eventBus}catch{return t?.eventBus||Dt()}},ar=(t,e,n=[],r)=>{const o=ir(r),i=s.useRef(e);s.useEffect(()=>{i.current=e},[e,...n]),s.useEffect(()=>{const a=l=>i.current(l);return o.on(t,a)},[t,o])},na=t=>{const e=ir(t);return s.useCallback((n,r)=>{e.emit(n,r)},[e])},ra=({event:t,handler:e,eventBus:n})=>(ar(t,e,[],{eventBus:n}),null);s.memo(ra);const{Text:Ot}=_e,oa=({message:t})=>{const e=na();return m.jsxs("button",{onClick:()=>e(`scrollToMessage-${t.id}`,t.id),className:"mb-2 flex flex-col items-start p-2 border-l-4 border-blue-400 bg-black bg-opacity-20 rounded w-full",children:[m.jsx(Ot,{className:"font-bold text-sm text-gray-300",children:t?.user?.username||"Not defined"}),m.jsx("p",{className:"text-sm text-gray-400 truncate",children:t.text||"Медиафайл"})]})},sa=s.memo(({item:t})=>{const{me:e}=or(),{setEditMessage:n,setReplyToMessage:r,handleDeleteMessage:o,mutationLoading:i}=nr(),c=s.useCallback(d=>e?.id===d,[e?.id])(t.user.id),l=[{key:"reply",disabled:i,label:"Ответить",onClick:()=>r(t)},{key:"delete",label:"Удалить",danger:!0,disabled:i,onClick:()=>o(t.id)},...c?[{key:"edit",disabled:i,label:"Редактировать",onClick:()=>n(t)}]:[]];return ar(`scrollToMessage-${t.id}`,d=>{const p=document.getElementById(d);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.classList.add("bg-yellow-300"),setTimeout(()=>{p.classList.remove("bg-yellow-300")},2e3))}),m.jsx(Pn.Item,{id:t.id,className:`flex ${c?"justify-end":"justify-start"} transition-all duration-300 !p-2 rounded-lg`,style:{border:"none",paddingBottom:"1rem"},children:m.jsxs("div",{className:"flex items-start max-w-xl w-full",children:[!c&&m.jsx("div",{className:"mr-3 flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center text-white font-bold",children:t.user.username.charAt(0).toUpperCase()})}),m.jsxs("div",{className:`relative p-3 rounded-lg w-full ${c?"bg-blue-600 text-white":"bg-gray-700 text-gray-200"}`,children:[m.jsx("div",{className:"absolute top-1 right-1 z-10",children:m.jsx(Qn,{menu:{items:l},trigger:["click"],children:m.jsx(he,{type:"text",shape:"circle",icon:m.jsx(kt,{className:"text-gray-400"})})})}),t.replyTo&&m.jsx(oa,{message:t.replyTo}),m.jsx(Ot,{className:`font-bold ${c?"text-white":"text-gray-300"}`,children:c?"Вы":t.user.username}),t.type===Oe.VOICE&&t.medias&&t?.medias?.length>0?m.jsx("div",{className:"mt-2",children:m.jsx(Qi,{url:`http://localhost:8080${t.medias[0].url}`})}):m.jsxs(m.Fragment,{children:[t.medias&&t.medias.length>0&&m.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2",children:t.medias.map(d=>m.jsx(Ki,{media:d},d.id))}),t.text&&m.jsx("p",{className:"pr-8 whitespace-pre-wrap mt-1",children:t.text})]}),m.jsx(Ot,{className:"text-xs text-gray-400 mt-2 block text-right",children:new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c&&m.jsx("div",{className:"ml-3 flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:"Я"})})]})})}),ia=()=>{const{loading:t,messages:e,chatRef:n}=nr(),{loading:r}=or();return s.useLayoutEffect(()=>{!t&&n?.current&&(n.current.scrollTop=n.current.scrollHeight)},[t,e,n]),r||t?m.jsx("div",{className:"flex-grow p-4 flex items-center justify-center",children:"Loading..."}):m.jsx("div",{ref:n,className:"flex-grow p-4 overflow-y-auto",children:m.jsx(ea,{children:m.jsx(Pn,{itemLayout:"horizontal",dataSource:e,renderItem:o=>m.jsx(sa,{item:o},o.id)})})})},aa=s.memo(ia),lr=s.createContext(null),la=s.memo(({children:t,value:e})=>m.jsx(lr.Provider,{value:e,children:t})),ca=()=>{const t=s.useContext(lr);if(!t)throw new Error("useChatContract must be used within a ChatContractProvider");return t},da=t=>{const e=t.type;return e.startsWith("image/")?"photo":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":"document"},ua=t=>t==="photo"?ie.IMAGE:t==="video"?ie.VIDEO:t==="audio"?ie.AUDIO:ie.DOCUMENT,pa=()=>{const t=ca(),e=s.useRef(null),n=()=>{e.current?.click()},r=async i=>{if(t.mode!=="default")return;const a=i.target.files;if(!a||a.length===0)return;const l=Array.from(a).reduce((p,h)=>{const u=da(h);return p[u]||(p[u]=[]),p[u].push(h),p},{}),d=[];for(const p in l){const h=p,u=l[h],y=await t.handleMultipleUpload(h,u);if(y){const g=y.split(","),f=ua(h);g.forEach(v=>{d.push({url:v,type:f})})}}if(d.length>0){const p=t.chatForm.getValues("medias")||[];t.chatForm.setValue("medias",[...p,...d])}e.current&&(e.current.value="")},o=i=>{switch(i.mode){case"voice":return m.jsxs("div",{className:"flex items-center justify-between w-full",children:[m.jsx(he,{type:"primary",danger:!0,size:"large",htmlType:"button",shape:"circle",icon:m.jsx(mn,{}),onClick:i.cancelRecording}),m.jsx("div",{className:"text-gray-300 font-mono mx-4",children:Et(i.recordingTimer)}),m.jsx(he,{type:"primary",size:"large",shape:"circle",icon:m.jsx(gn,{}),onClick:i.stopRecording,loading:i.mutationLoading})]});case"edit":return m.jsxs(m.Fragment,{children:[m.jsx(rn,{name:"text",control:i.chatForm.control,render:({field:a})=>m.jsx(on,{...a,size:"large",placeholder:"Редактировать сообщение...",className:"flex-grow mr-4",disabled:i.mutationLoading,autoFocus:!0})}),m.jsx(he,{type:"primary",size:"large",icon:m.jsx(Nn,{}),htmlType:"submit",loading:i.mutationLoading})]});case"default":{const{chatForm:a}=i,c=a.watch("text"),l=a.watch("medias"),d=c&&c.trim().length>0,p=l&&l.length>0,h=d||p,u=h?m.jsx(gn,{}):m.jsx(Ns,{});return m.jsxs("div",{className:"flex flex-col w-full",children:[l&&l.length>0&&m.jsx("div",{className:"flex space-x-2 mb-2 overflow-x-auto",children:l.map((y,g)=>m.jsxs("div",{className:"relative",children:[y.type===ie.IMAGE?m.jsx("img",{src:`http://localhost:8080${y.url}`,alt:`attachment-${g}`,className:"h-16 w-16 object-cover rounded"}):m.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-gray-700 rounded",children:m.jsx("span",{className:"text-sm text-gray-300",children:y.type.charAt(0).toUpperCase()+y.type.slice(1)})}),m.jsx(he,{type:"text",shape:"circle",icon:m.jsx(mn,{}),size:"small",className:"absolute -top-2 -right-2 bg-red-600 text-white",onClick:()=>{const f=l.filter((v,b)=>b!==g);a.setValue("medias",f)}})]},g))}),m.jsxs("div",{className:"flex items-center w-full justify-between",children:[m.jsx("input",{type:"file",multiple:!0,ref:e,onChange:r,style:{display:"none"}}),m.jsx(he,{size:"large",icon:m.jsx(Ws,{}),onClick:n,className:"mr-4",disabled:i.mutationLoading}),m.jsx(rn,{name:"text",control:a.control,render:({field:y})=>m.jsx(on,{...y,size:"large",placeholder:"Напишите сообщение...",className:"flex-grow mr-4",disabled:i.mutationLoading})}),m.jsx(he,{type:"primary",size:"large",icon:u,loading:i.mutationLoading,htmlType:h?"submit":"button",onClick:h?void 0:i.startRecording})]})]})}default:return null}};return m.jsxs("div",{className:"p-4 bg-gray-800 border-t border-gray-700",children:[t.replyToMessage&&m.jsx(nn,{message:`Ответ на сообщение: ${t.replyToMessage.type===Oe.TEXT?`${t.replyToMessage.text?.substring(0,50)||"Медиафайл"}...`:"Голосове сообщение"}`,type:"info",closable:!0,onClose:()=>t.setReplyToMessage(null),className:"mb-2"}),t.mode==="edit"&&t.editMessage&&m.jsx(nn,{message:"Редактирование сообщения...",type:"warning",closable:!0,onClose:t.cancelEdit,className:"mb-2"}),m.jsx("form",{onSubmit:t.mode!=="voice"?i=>{i.preventDefault(),t.chatForm.setValue("type",Oe.TEXT),t.handleSubmit(i)}:i=>i.preventDefault(),className:"flex items-center",children:o(t)})]})},ha=s.memo(pa),ge=Object.create(null);ge.open="0";ge.close="1";ge.ping="2";ge.pong="3";ge.message="4";ge.upgrade="5";ge.noop="6";const Fe=Object.create(null);Object.keys(ge).forEach(t=>{Fe[ge[t]]=t});const _t={type:"error",data:"parser error"},cr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",dr=typeof ArrayBuffer=="function",ur=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ft=({type:t,data:e},n,r)=>cr&&e instanceof Blob?n?r(e):Sn(e,r):dr&&(e instanceof ArrayBuffer||ur(e))?n?r(e):Sn(new Blob([e]),r):r(ge[t]+(e||"")),Sn=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function En(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let yt;function fa(t,e){if(cr&&t.data instanceof Blob)return t.data.arrayBuffer().then(En).then(e);if(dr&&(t.data instanceof ArrayBuffer||ur(t.data)))return e(En(t.data));Ft(t,!1,n=>{yt||(yt=new TextEncoder),e(yt.encode(n))})}const On="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<On.length;t++)Re[On.charCodeAt(t)]=t;const ma=t=>{let e=t.length*.75,n=t.length,r,o=0,i,a,c,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),p=new Uint8Array(d);for(r=0;r<n;r+=4)i=Re[t.charCodeAt(r)],a=Re[t.charCodeAt(r+1)],c=Re[t.charCodeAt(r+2)],l=Re[t.charCodeAt(r+3)],p[o++]=i<<2|a>>4,p[o++]=(a&15)<<4|c>>2,p[o++]=(c&3)<<6|l&63;return d},ga=typeof ArrayBuffer=="function",Vt=(t,e)=>{if(typeof t!="string")return{type:"message",data:pr(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ya(t.substring(1),e)}:Fe[n]?t.length>1?{type:Fe[n],data:t.substring(1)}:{type:Fe[n]}:_t},ya=(t,e)=>{if(ga){const n=ma(t);return pr(n,e)}else return{base64:!0,data:t}},pr=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},hr="",ba=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((i,a)=>{Ft(i,!1,c=>{r[a]=c,++o===n&&e(r.join(hr))})})},va=(t,e)=>{const n=t.split(hr),r=[];for(let o=0;o<n.length;o++){const i=Vt(n[o],e);if(r.push(i),i.type==="error")break}return r};function xa(){return new TransformStream({transform(t,e){fa(t,n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let bt;function He(t){return t.reduce((e,n)=>e+n.length,0)}function De(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let o=0;o<e;o++)n[o]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Ca(t,e){bt||(bt=new TextDecoder);const n=[];let r=0,o=-1,i=!1;return new TransformStream({transform(a,c){for(n.push(a);;){if(r===0){if(He(n)<1)break;const l=De(n,1);i=(l[0]&128)===128,o=l[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(He(n)<2)break;const l=De(n,2);o=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(He(n)<8)break;const l=De(n,8),d=new DataView(l.buffer,l.byteOffset,l.length),p=d.getUint32(0);if(p>Math.pow(2,21)-1){c.enqueue(_t);break}o=p*Math.pow(2,32)+d.getUint32(4),r=3}else{if(He(n)<o)break;const l=De(n,o);c.enqueue(Vt(i?l:bt.decode(l),e)),r=0}if(o===0||o>t){c.enqueue(_t);break}}}})}const fr=4;function G(t){if(t)return wa(t)}function wa(t){for(var e in G.prototype)t[e]=G.prototype[e];return t}G.prototype.on=G.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};G.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};G.prototype.off=G.prototype.removeListener=G.prototype.removeAllListeners=G.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};G.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this};G.prototype.emitReserved=G.prototype.emit;G.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};G.prototype.hasListeners=function(t){return!!this.listeners(t).length};const nt=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),$a="arraybuffer";function mr(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Sa=se.setTimeout,Ea=se.clearTimeout;function rt(t,e){e.useNativeTimers?(t.setTimeoutFn=Sa.bind(se),t.clearTimeoutFn=Ea.bind(se)):(t.setTimeoutFn=se.setTimeout.bind(se),t.clearTimeoutFn=se.clearTimeout.bind(se))}const Oa=1.33;function _a(t){return typeof t=="string"?Ta(t):Math.ceil((t.byteLength||t.size)*Oa)}function Ta(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function gr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ia(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Ba(t){let e={},n=t.split("&");for(let r=0,o=n.length;r<o;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Ra extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Ut extends G{constructor(e){super(),this.writable=!1,rt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Ra(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Vt(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ia(e);return n.length?"?"+n:""}}class Na extends Ut{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};va(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ba(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=gr()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let yr=!1;try{yr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Pa=yr;function Ma(){}class Aa extends Na{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class me extends G{constructor(e,n,r){super(),this.createRequest=e,rt(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=mr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=me.requestsCount++,me.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ma,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete me.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}me.requestsCount=0;me.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_n);else if(typeof addEventListener=="function"){const t="onpagehide"in se?"pagehide":"unload";addEventListener(t,_n,!1)}}function _n(){for(let t in me.requests)me.requests.hasOwnProperty(t)&&me.requests[t].abort()}const ka=(function(){const t=br({xdomain:!1});return t&&t.responseType!==null})();class ja extends Aa{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=ka&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new me(br,this.uri(),e)}}function br(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Pa))return new XMLHttpRequest}catch{}if(!e)try{return new se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class La extends Ut{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=vr?{}:mr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;Ft(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}o&&nt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=gr()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const vt=se.WebSocket||se.MozWebSocket;class za extends La{createSocket(e,n,r){return vr?new vt(e,n,r):n?new vt(e,n):new vt(e)}doWrite(e,n){this.ws.send(n)}}class Ha extends Ut{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Ca(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),o=xa();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const i=()=>{r.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;this._writer.write(r).then(()=>{o&&nt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Da={websocket:za,webtransport:Ha,polling:ja},Fa=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Va=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Tt(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=Fa.exec(t||""),i={},a=14;for(;a--;)i[Va[a]]=o[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ua(i,i.path),i.queryKey=qa(i,i.query),i}function Ua(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function qa(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,i){o&&(n[o]=i)}),n}const It=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ve=[];It&&addEventListener("offline",()=>{Ve.forEach(t=>t())},!1);class xe extends G{constructor(e,n){if(super(),this.binaryType=$a,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Tt(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Tt(n.host).host);rt(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ba(this.opts.query)),It&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ve.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=fr,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&xe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",xe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=_a(o)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(xe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),It&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ve.indexOf(this._offlineEventListener);r!==-1&&Ve.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}xe.protocol=fr;class Wa extends xe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;xe.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;xe.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=n.name,this.emitReserved("upgradeError",u)}}))};function i(){r||(r=!0,p(),n.close(),n=null)}const a=h=>{const u=new Error("probe error: "+h);u.transport=n.name,i(),this.emitReserved("upgradeError",u)};function c(){a("transport closed")}function l(){a("socket closed")}function d(h){n&&h.name!==n.name&&i()}const p=()=>{n.removeListener("open",o),n.removeListener("error",a),n.removeListener("close",c),this.off("close",l),this.off("upgrading",d)};n.once("open",o),n.once("error",a),n.once("close",c),this.once("close",l),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Xa=class extends Wa{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>Da[o]).filter(o=>!!o)),super(e,r)}};function Ga(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Tt(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Ka=typeof ArrayBuffer=="function",Ya=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,xr=Object.prototype.toString,Qa=typeof Blob=="function"||typeof Blob<"u"&&xr.call(Blob)==="[object BlobConstructor]",Ja=typeof File=="function"||typeof File<"u"&&xr.call(File)==="[object FileConstructor]";function qt(t){return Ka&&(t instanceof ArrayBuffer||Ya(t))||Qa&&t instanceof Blob||Ja&&t instanceof File}function Ue(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ue(t[n]))return!0;return!1}if(qt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ue(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ue(t[n]))return!0;return!1}function Za(t){const e=[],n=t.data,r=t;return r.data=Bt(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Bt(t,e){if(!t)return t;if(qt(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Bt(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Bt(t[r],e));return n}return t}function el(t,e){return t.data=Rt(t.data,e),delete t.attachments,t}function Rt(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Rt(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Rt(t[n],e));return t}const tl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nl=5;var k;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(k||(k={}));class rl{constructor(e){this.replacer=e}encode(e){return(e.type===k.EVENT||e.type===k.ACK)&&Ue(e)?this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===k.BINARY_EVENT||e.type===k.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Za(e),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}function Tn(t){return Object.prototype.toString.call(t)==="[object Object]"}class Wt extends G{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===k.BINARY_EVENT;r||n.type===k.BINARY_ACK?(n.type=r?k.EVENT:k.ACK,this.reconstructor=new ol(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(qt(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(k[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===k.BINARY_EVENT||r.type===k.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Wt.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case k.CONNECT:return Tn(n);case k.DISCONNECT:return n===void 0;case k.CONNECT_ERROR:return typeof n=="string"||Tn(n);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&tl.indexOf(n[0])===-1);case k.ACK:case k.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ol{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=el(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const sl=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wt,Encoder:rl,get PacketType(){return k},protocol:nl},Symbol.toStringTag,{value:"Module"}));function pe(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const il=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cr extends G{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[pe(e,"open",this.onopen.bind(this)),pe(e,"packet",this.onpacket.bind(this)),pe(e,"error",this.onerror.bind(this)),pe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,o,i;if(il.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:k.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,h=n.pop();this._registerAckCallback(p,h),a.id=p}const c=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},o),a=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,o)=>{const i=(a,c)=>a?o(a):r(c);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...i)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:k.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case k.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case k.EVENT:case k.BINARY_EVENT:this.onevent(e);break;case k.ACK:case k.BINARY_ACK:this.onack(e);break;case k.DISCONNECT:this.ondisconnect();break;case k.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:k.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:k.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Te(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Te.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Te.prototype.reset=function(){this.attempts=0};Te.prototype.setMin=function(t){this.ms=t};Te.prototype.setMax=function(t){this.max=t};Te.prototype.setJitter=function(t){this.jitter=t};class Nt extends G{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,rt(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Te({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||sl;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Xa(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=pe(n,"open",function(){r.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=pe(n,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(o),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(pe(e,"ping",this.onping.bind(this)),pe(e,"data",this.ondata.bind(this)),pe(e,"error",this.onerror.bind(this)),pe(e,"close",this.onclose.bind(this)),pe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){nt(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Cr(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ie={};function qe(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Ga(t,e.path||"/socket.io"),r=n.source,o=n.id,i=n.path,a=Ie[o]&&i in Ie[o].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return c?l=new Nt(r,e):(Ie[o]||(Ie[o]=new Nt(r,e)),l=Ie[o]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(qe,{Manager:Nt,Socket:Cr,io:qe,connect:qe});const al="http://localhost:9000",ll="/socket.io";let Z=null;const cl=()=>{Z=qe(al,{autoConnect:!1,path:ll,extraHeaders:{Authorization:`Bearer ${Zr()}`}})};class Ke{static toDomain(e){return{chat:void 0,updatedAt:e.updatedAt,type:e.type,id:e.id,text:e.text,createdAt:e.createdAt,medias:e.medias?.map(Ke.mediaToDomain)||[],replyTo:e.replyTo?Ke.toDomain(e.replyTo):void 0,replies:[],user:eo.toDomain(e.user)}}static mediaToDomain(e){return{id:e.id,type:e.type,url:e.url,createdAt:e.createdAt,updatedAt:e.updatedAt,message:void 0}}}const dl=async(t,e)=>ve({method:"POST",url:`/messages/${t}`,data:e}),ul=async(t,e)=>ve({method:"DELETE",url:`/messages/${t}/${e}`}),pl=async(t,e,n)=>ve({method:"PATCH",url:`/messages/${t}/${e}`,data:{text:n}}),hl=async(t,e)=>{const n=await ve({method:"GET",url:`/messages/${t}`,params:e}),r=n.data.map(Ke.toDomain);return{...n,data:r}},ot={sendMessage:dl,deleteMessage:ul,editMessage:pl,getAllMessages:hl},fl=25,ml=300,gl=(t,e)=>{const n=to(),r=s.useMemo(()=>["chat-messages",t],[t]),{data:o,error:i,fetchNextPage:a,hasNextPage:c,isLoading:l,isError:d,isFetchingNextPage:p}=Li({queryKey:r,queryFn:async({pageParam:u})=>ot.getAllMessages(t,{page:u,limit:fl}),initialPageParam:1,getNextPageParam:u=>u.currentPage<u.totalPages?u.currentPage+1:void 0,staleTime:1});return s.useEffect(()=>{if(!Z||!t)return;Z.connected||Z.connect();const u=()=>{console.log(`[Socket] Emitting 'join_chat' for chatId: ${t}`),Z&&Z.emit("join_chat",t)};Z.connected?u():Z.on("connect",u);const y=v=>{n.setQueryData(r,$=>{if(!$)return $;const E=$.pages.map((w,C)=>C===0?{...w,data:[...w.data,v]}:w);return{...$,pages:E}}),(e&&"current"in e&&e.current?e.current.scrollHeight-e.current.scrollTop-e.current.clientHeight<ml:!1)?setTimeout(()=>{e&&"current"in e&&e.current&&(e.current.scrollTop=e.current.scrollHeight)},250):ae("Пришло новое сообщение","info")},g=v=>{n.setQueryData(r,b=>{if(!b)return b;const $=b.pages.map(E=>({...E,data:E.data.map(w=>w.id===v.id?v:w)}));return{...b,pages:$}})},f=v=>{n.setQueryData(r,b=>{if(!b)return b;const $=b.pages.map(E=>({...E,data:E.data.filter(w=>w.id!==v)}));return{...b,pages:$}})};return Z.on("new_message",y),Z.on("message_updated",g),Z.on("message_deleted",f),()=>{Z&&(Z.off("new_message",y),Z.off("message_updated",g),Z.off("message_deleted",f),Z.emit("leave_chat",t),Z.off("connect",u))}},[t,n,r,e]),s.useLayoutEffect(()=>{cl()},[]),{messages:s.useMemo(()=>o?.pages?o.pages.slice().reverse().flatMap(u=>u.data):[],[o]),isLoading:l,isError:d,error:i,fetchNextPage:a,hasNextPage:c,isFetchingNextPage:p}},yl=({afterSuccess:t=Ee,afterError:e=Ee,showSuccessNotification:n=!0,showErrorNotification:r=!1,chatId:o=""})=>{const{error:i,isPending:a,mutateAsync:c,isError:l}=Qe({mutationFn:async d=>await ot.deleteMessage(o,d),onSuccess:async()=>{n&&ae("Сообщение успешно удалено!","success"),t&&t()},onError:async d=>{r&&ae(d.message,"error"),e&&e()}});return{loading:a,deleteMessage:c,error:l?i?.message:[]}},bl=jt({type:jn(ie),url:Lt({message:"URL медиафайла должен быть валидным."})}),vl=jt({type:jn(Oe),text:Lt().min(0,{message:"Текст сообщения не может быть пустым."}).max(2e3,{message:"Текст сообщения не должен превышать 2000 символов."}).optional(),replyToId:ko({message:"ID сообщения для ответа должен быть в формате UUID."}).optional(),medias:Ao(bl).optional()}).superRefine((t,e)=>{const n=!!t.text&&t.text.trim().length>0,r=!!t.medias&&t.medias.length>0;!n&&!r&&e.addIssue({code:"custom",message:"Сообщение должно содержать либо текст, либо медиафайлы.",path:["text"]})}),xl=({afterSuccess:t=Ee,afterError:e=Ee,showSuccessNotification:n=!0,showErrorNotification:r=!1,clearForm:o=!1,chatId:i="",chatRef:a})=>{const[c,l]=s.useState(null),{error:d,isPending:p,mutateAsync:h,isError:u}=Qe({mutationFn:async f=>await ot.sendMessage(i,f),onSuccess:async()=>{n&&ae("Сообщение успешно отправлено!","success"),t&&t()},onError:async f=>{r&&ae(f.message,"error"),e&&e()}}),y=Ln({mode:"all",reValidateMode:"onChange",resolver:zn(vl)}),g=y.handleSubmit(async f=>{a&&typeof a!="function"&&a.current&&a.current.scrollTo(0,a.current.scrollHeight),console.log("Triggered",f),await h({...f,replyToId:c?.id}),o&&y.reset(),l(null)});return{form:y,loading:p,sendMessage:g,error:u?d?.message:[],replyMessage:c,setReplyMessage:l,sendMessageMutation:h}},Cl=jt({text:Lt().min(1,{message:"Текст сообщения не может быть пустым."}).max(2e3,{message:"Текст сообщения не должен превышать 2000 символов."})}),wl=({afterSuccess:t=Ee,afterError:e=Ee,showSuccessNotification:n=!0,showErrorNotification:r=!1,clearForm:o=!1,chatId:i=""})=>{const[a,c]=s.useState(null),{error:l,isPending:d,mutateAsync:p,isError:h}=Qe({mutationFn:async g=>await ot.editMessage(i,a?.id||"",g.text),onSuccess:async()=>{n&&ae("Сообщение успешно обновлено!","success"),t&&t()},onError:async g=>{r&&ae(g.message,"error"),e&&e()}}),u=Ln({mode:"all",reValidateMode:"onChange",resolver:zn(Cl)}),y=u.handleSubmit(async g=>{a&&(await p(g),o&&u.reset(),c(null))});return{form:u,loading:d,updateMessage:y,error:h?l?.message:[],editMessage:a,setEditMessage:c}},$l=async t=>ve({data:t,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/upload/video"}),Sl=async t=>ve({data:t,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/upload/photo"}),El=async t=>ve({data:t,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/upload/document"}),Ol=async t=>ve({data:t,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/upload/audio"}),_l=async t=>ve({data:t,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/upload/voice"}),Be={uploadVideo:$l,uploadPhoto:Sl,uploadDocument:El,uploadAudio:Ol,uploadVoice:_l},xt={photo:{uploadFn:Be.uploadPhoto,formDataKey:"photo"},video:{uploadFn:Be.uploadVideo,formDataKey:"video"},document:{uploadFn:Be.uploadDocument,formDataKey:"document"},audio:{uploadFn:Be.uploadAudio,formDataKey:"audio"},voice:{uploadFn:Be.uploadVoice,formDataKey:"voice"}},wr=()=>{const{isPending:t,mutateAsync:e,error:n}=Qe({mutationFn:({type:i,fileFormData:a})=>{const{uploadFn:c}=xt[i];return c(a)},onError:i=>{ae(i.message,"error")}}),r=s.useCallback(async(i,a,c)=>{const{formDataKey:l}=xt[i],d=new FormData;d.append(l,a);try{const p=await e({type:i,fileFormData:d});return c&&c(p.url),p.url}catch(p){console.error("Upload failed:",p),ae("Upload failed. Please try again.","error");return}},[e]),o=s.useCallback(async(i,a,c)=>{const{formDataKey:l}=xt[i],d=[];try{for(const h of a){const u=new FormData;u.append(l,h);const y=await e({type:i,fileFormData:u});d.push(y.url)}const p=d.join(",");return c&&c(p),p}catch(p){ae("One or more uploads failed. Please try again.","error"),console.error("Multiple upload failed:",p);return}},[e]);return{isLoading:t,error:n?.message??null,handleUpload:r,handleMultipleUpload:o}},Tl=({createNewMessage:t})=>{const{handleUpload:e,isLoading:n}=wr(),[r,o]=s.useState(!1),[i,a]=s.useState(0),c=s.useRef(null);s.useEffect(()=>(r?c.current=setInterval(()=>{a(g=>g+1)},1e3):a(0),()=>{c.current&&clearInterval(c.current)}),[r]);const l=s.useRef(null),d=s.useRef([]),p=s.useCallback(async()=>{if(d.current.length===0)return;const g=new Blob(d.current,{type:"audio/webm"}),f=new File([g],"voice-message.webm",{type:"audio/webm"});d.current=[];try{const v=await e("voice",f);v?t({type:Oe.VOICE,medias:[{type:ie.VOICE,url:v}]}):ae("Failed to upload voice message. Please try again.","error")}catch(v){console.error("Error during voice message upload:",v)}},[e,t]),h=s.useCallback(async()=>{try{const g=await navigator.mediaDevices.getUserMedia({audio:!0});o(!0);const f=new MediaRecorder(g);l.current=f,d.current=[],f.start(),f.ondataavailable=v=>{v.data.size>0&&d.current.push(v.data)},f.onstop=p}catch(g){ae("Microphone access was denied.","error"),o(!1),console.log("Error accessing microphone:",g)}},[p]),u=s.useCallback(()=>{l.current&&r&&(l.current.stop(),l.current.stream.getTracks().forEach(g=>g.stop()),o(!1))},[r]),y=s.useCallback(()=>{l.current&&r&&(l.current.onstop=null,l.current.stop(),l.current.stream.getTracks().forEach(g=>g.stop()),o(!1),d.current=[])},[r]);return{isRecording:r,isUploading:n,startRecording:h,stopRecording:u,cancelRecording:y,recordingTimer:i}},Il=({ref:t,threshold:e=100})=>{const[n,r]=s.useState(!1);s.useEffect(()=>{if(!t||!("current"in t)||!t.current)return;const i=()=>{if(!t.current)return;const{scrollTop:c,scrollHeight:l,clientHeight:d}=t.current;r(l-c-d<=e)},a=t.current;return a.addEventListener("scroll",i),i(),()=>{a.removeEventListener("scroll",i)}},[t,e]);const o=s.useCallback(()=>{t&&"current"in t&&t.current&&(t.current.scrollTop=t.current.scrollHeight)},[t]);return{isAtBottom:n,scrollToBottom:o}},Bl=({children:t,clearForm:e,showErrorNotification:n,showSuccessNotification:r,afterError:o,afterSuccess:i,chatId:a=""})=>{const[c,l]=s.useState("default"),d=s.useRef(null),{isAtBottom:p}=Il({ref:d,threshold:300}),{messages:h,isFetchingNextPage:u,hasNextPage:y,fetchNextPage:g}=gl(a,d),{loading:f,form:v,sendMessage:b,setReplyMessage:$,replyMessage:E,sendMessageMutation:w}=xl({chatId:a,clearForm:e,showErrorNotification:n,showSuccessNotification:r,afterError:o,afterSuccess:i,chatRef:d}),{loading:C,form:B,updateMessage:S,setEditMessage:R,editMessage:_}=wl({chatId:a,clearForm:e,showErrorNotification:n,showSuccessNotification:r,afterError:o,afterSuccess:i}),{loading:I,deleteMessage:z}=yl({chatId:a,showErrorNotification:n,showSuccessNotification:r,afterError:o,afterSuccess:i}),{handleMultipleUpload:H,isLoading:M}=wr(),{startRecording:x,stopRecording:T,recordingTimer:j,isUploading:N,cancelRecording:A}=Tl({createNewMessage:w}),F=s.useCallback(ne=>{R(ne),l(ne?"edit":"default")},[R]),K=s.useCallback(()=>{F(null)},[F]),Y=s.useCallback(()=>{x(),l("voice")},[x]),W=s.useCallback(()=>{T(),l("default")},[T]),D=s.useCallback(()=>{A(),l("default")},[A]),Q=s.useMemo(()=>{const ee={mutationLoading:f||C||M||N||I,chatRef:d,handleDeleteMessage:z,handleMultipleUpload:H,replyToMessage:E,setReplyToMessage:$,setEditMessage:F,startRecording:Y};return c==="edit"&&_?{...ee,mode:"edit",isRecording:!1,editMessage:_,chatForm:B,handleSubmit:S,cancelEdit:K}:c==="voice"?{...ee,mode:"voice",isRecording:!0,editMessage:null,recordingTimer:j,stopRecording:W,cancelRecording:D}:{...ee,mode:"default",isRecording:!1,editMessage:null,chatForm:v,handleSubmit:b}},[c,f,C,M,N,I,z,H,E,$,_,B,S,W,D,F,Y,K,j,v,b]),X=s.useMemo(()=>({loading:u,chatRef:d,setReplyToMessage:$,setEditMessage:F,messages:h,mutationLoading:f||C||M||N||I,handleDeleteMessage:z,isAtBottom:p,isFetchingMore:u,hasMore:y,fetchMoreMessages:g,error:null}),[u,d,$,F,h,f,C,M,N,I,z,p,y,g]);return m.jsx(Wi,{value:X,children:m.jsx(la,{value:Q,children:t})})},Rl=s.memo(Bl),Nl=({children:t})=>{const{loading:e,refetch:n,me:r,error:o}=no();return m.jsx(Xi,{error:o,loading:e,me:r,refetch:n,children:t})},Pl=s.memo(Nl),{Content:Ml}=be,Al=()=>{const e=ro().chatId||"";return m.jsx("main",{className:"h-screen",children:m.jsxs(be,{className:"h-full",children:[m.jsx(qi,{chatId:e}),m.jsx(be,{children:m.jsx(Ml,{className:"flex flex-col",children:m.jsx(Pl,{children:m.jsxs(Rl,{clearForm:!0,chatId:e,showErrorNotification:!0,showSuccessNotification:!1,children:[m.jsx(aa,{}),m.jsx(ha,{})]})})})})]})})},Hl=s.memo(Al);export{Hl as default};
