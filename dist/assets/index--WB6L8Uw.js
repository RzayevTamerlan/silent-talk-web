import{r as o,_ as pe,u as Zn,R as D,l as Ht,c as Jn,a as er,D as tr,g as Gt,C as de,b as T,d as ct,e as ut,f as K,h as nr,i as dt,j as rr,k as ar,m as or,n as qe,o as Ue,p as Se,q as sr,s as qt,t as ue,v as Ut,w as Kt,x as Q,y as ir,z as Pe,A as lr,B as We,E as Xt,F as cr,G as nt,H as Qt,I as ur,J as dr,K as mr,L as d,M as ze,N as mt,O as Yt,S as fr,P as gr,Q as pr}from"./index-DWunGnNs.js";import{S as hr,C as Ke,R as vr,F as me}from"./UserOutlined-BWVTQqm_.js";import{B as ae,c as Zt,u as Xe,R as ft,p as br,a as Me,b as Cr,C as at,z as xr,g as Re,d as yr,e as Sr,f as Nr,h as Or,i as $r,j as Jt,k as wr,r as Er,l as jr,m as Pr,n as Ir,P as Rr,o as zr,q as Mr,s as Tr,t as kr,T as Br,K as Fr,v as _r,I as $e,w as Dr,x as Ar,y as Vr,A as Lr,D as Wr,E as Hr,F as en,G as Gr,H as qr,J as Ur,L as Kr,M as Xr,N as Qr,O as Yr,Q as Zr,S as Jr,U as ea,V as ta,W as wt,X as na,Y as ra,Z as aa,_ as oa,$ as sa,a0 as ia,a1 as la,a2 as Qe,a3 as gt,a4 as Ne,a5 as Oe,a6 as Ie,a7 as Ae,a8 as tn,a9 as ca,aa as Ve,ab as nn,ac as rn}from"./zod-BO01kIQ2.js";import{m as Et,u as an,D as ua,p as da,a as ma,R as fa,w as ga,P as pa,b as ha,T as va,c as Te,L as jt,d as ba}from"./index-B-8WeSQi.js";function Ca(){const[e,t]=o.useState([]),n=o.useCallback(r=>(t(a=>[].concat(pe(a),[r])),()=>{t(a=>a.filter(s=>s!==r))}),[]);return[e,n]}function rt(e){return!!e?.then}const on=e=>{const{type:t,children:n,prefixCls:r,buttonProps:a,close:s,autoFocus:u,emitEvent:i,isSilent:c,quitOnNullishReturnValue:m,actionFn:l}=e,p=o.useRef(!1),h=o.useRef(null),[g,x]=Zn(!1),v=(...f)=>{s?.apply(void 0,f)};o.useEffect(()=>{let f=null;return u&&(f=setTimeout(()=>{var C;(C=h.current)===null||C===void 0||C.focus({preventScroll:!0})})),()=>{f&&clearTimeout(f)}},[]);const S=f=>{rt(f)&&(x(!0),f.then((...C)=>{x(!1,!0),v.apply(void 0,C),p.current=!1},C=>{if(x(!1,!0),p.current=!1,!c?.())return Promise.reject(C)}))},y=f=>{if(p.current)return;if(p.current=!0,!l){v();return}let C;if(i){if(C=l(f),m&&!rt(C)){p.current=!1,v(f);return}}else if(l.length)C=l(s),p.current=!1;else if(C=l(),!rt(C)){v();return}S(C)};return o.createElement(ae,Object.assign({},Zt(t),{onClick:y,loading:g,prefixCls:r},a,{ref:h}),n)},ke=D.createContext({}),{Provider:sn}=ke,Pt=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:r,mergedOkCancel:a,rootPrefixCls:s,close:u,onCancel:i,onConfirm:c}=o.useContext(ke);return a?D.createElement(on,{isSilent:r,actionFn:i,close:(...m)=>{u?.apply(void 0,m),c?.(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${s}-btn`},n):null},It=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:r,rootPrefixCls:a,okTextLocale:s,okType:u,onConfirm:i,onOk:c}=o.useContext(ke);return D.createElement(on,{isSilent:n,type:u||"primary",actionFn:c,close:(...m)=>{t?.apply(void 0,m),i?.(!0)},autoFocus:e==="ok",buttonProps:r,prefixCls:`${a}-btn`},s)};function He(e){if(!e)return;const{closable:t,closeIcon:n}=e;return{closable:t,closeIcon:n}}function Rt(e){const{closable:t,closeIcon:n}=e||{};return D.useMemo(()=>{if(!t&&(t===!1||n===!1||n===null))return!1;if(t===void 0&&n===void 0)return null;let r={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return t&&typeof t=="object"&&(r=Object.assign(Object.assign({},r),t)),r},[t,n])}const xa={};function ln(e,t,n=xa){const r=Rt(e),a=Rt(t),[s]=Xe("global",Ht.global),u=typeof r!="boolean"?!!r?.disabled:!1,i=D.useMemo(()=>Object.assign({closeIcon:D.createElement(ft,null)},n),[n]),c=D.useMemo(()=>r===!1?!1:r?Et(i,a,r):a===!1?!1:a?Et(i,a):i.closable?i:!1,[r,a,i]);return D.useMemo(()=>{var m,l;if(c===!1)return[!1,null,u,{}];const{closeIconRender:p}=i,{closeIcon:h}=c;let g=h;const x=br(c,!0);return g!=null&&(p&&(g=p(h)),g=D.isValidElement(g)?D.cloneElement(g,Object.assign(Object.assign(Object.assign({},g.props),{"aria-label":(l=(m=g.props)===null||m===void 0?void 0:m["aria-label"])!==null&&l!==void 0?l:s.close}),x)):D.createElement("span",Object.assign({"aria-label":s.close},x),g)),[!0,g,u,x]},[c,i])}const ya=()=>Jn()&&window.document.documentElement;function zt(){}const Sa=o.createContext({add:zt,remove:zt});function Na(e){const t=o.useContext(Sa),n=o.useRef(null);return er(a=>{if(a){const s=e?a.querySelector(e):a;t.add(s),n.current=s}else t.remove(n.current)})}const Mt=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=o.useContext(ke);return D.createElement(ae,Object.assign({onClick:n},e),t)},Tt=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:r,onOk:a}=o.useContext(ke);return D.createElement(ae,Object.assign({},Zt(n),{loading:e,onClick:a},t),r)};function cn(e,t){return D.createElement("span",{className:`${e}-close-x`},t||D.createElement(ft,{className:`${e}-close-icon`}))}const un=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:a,onOk:s,onCancel:u,okButtonProps:i,cancelButtonProps:c,footer:m}=e,[l]=Xe("Modal",Gt()),p=t||l?.okText,h=r||l?.cancelText,g={confirmLoading:a,okButtonProps:i,cancelButtonProps:c,okTextLocale:p,cancelTextLocale:h,okType:n,onOk:s,onCancel:u},x=D.useMemo(()=>g,pe(Object.values(g)));let v;return typeof m=="function"||typeof m>"u"?(v=D.createElement(D.Fragment,null,D.createElement(Mt,null),D.createElement(Tt,null)),typeof m=="function"&&(v=m(v,{OkBtn:Tt,CancelBtn:Mt})),v=D.createElement(sn,{value:x},v)):v=m,D.createElement(tr,{disabled:!1},v)};var Oa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};let ot;const $a=e=>{ot={x:e.pageX,y:e.pageY},setTimeout(()=>{ot=null},100)};ya()&&document.documentElement.addEventListener("click",$a,!0);const dn=e=>{const{prefixCls:t,className:n,rootClassName:r,open:a,wrapClassName:s,centered:u,getContainer:i,focusTriggerAfterClose:c=!0,style:m,visible:l,width:p=520,footer:h,classNames:g,styles:x,children:v,loading:S,confirmLoading:y,zIndex:f,mousePosition:C,onOk:b,onCancel:E,destroyOnHidden:P,destroyOnClose:w,panelRef:B=null}=e,W=Oa(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose","panelRef"]),{getPopupContainer:V,getPrefixCls:A,direction:k,modal:O}=o.useContext(de),G=ie=>{y||E?.(ie)},Z=ie=>{b?.(ie)},I=A("modal",t),Y=A(),F=Me(I),[X,R,_]=an(I,F),U=T(s,{[`${I}-centered`]:u??O?.centered,[`${I}-wrap-rtl`]:k==="rtl"}),q=h!==null&&!S?o.createElement(un,Object.assign({},e,{onOk:Z,onCancel:G})):null,[te,ne,fe,ge]=ln(He(e),He(O),{closable:!0,closeIcon:o.createElement(ft,{className:`${I}-close-icon`}),closeIconRender:ie=>cn(I,ie)}),z=Na(`.${I}-content`),oe=ct(B,z),[se,H]=Cr("Modal",f),[L,J]=o.useMemo(()=>p&&typeof p=="object"?[void 0,p]:[p,void 0],[p]),Fe=o.useMemo(()=>{const ie={};return J&&Object.keys(J).forEach(we=>{const le=J[we];le!==void 0&&(ie[`--${I}-${we}-width`]=typeof le=="number"?`${le}px`:le)}),ie},[J]);return X(o.createElement(at,{form:!0,space:!0},o.createElement(xr.Provider,{value:H},o.createElement(ua,Object.assign({width:L},W,{zIndex:se,getContainer:i===void 0?V:i,prefixCls:I,rootClassName:T(R,r,_,F),footer:q,visible:a??l,mousePosition:C??ot,onClose:G,closable:te&&Object.assign({disabled:fe,closeIcon:ne},ge),closeIcon:ne,focusTriggerAfterClose:c,transitionName:Re(Y,"zoom",e.transitionName),maskTransitionName:Re(Y,"fade",e.maskTransitionName),className:T(R,n,O?.className),style:Object.assign(Object.assign(Object.assign({},O?.style),m),Fe),classNames:Object.assign(Object.assign(Object.assign({},O?.classNames),g),{wrapper:T(U,g?.wrapper)}),styles:Object.assign(Object.assign({},O?.styles),x),panelRef:oe,destroyOnClose:P??w}),S?o.createElement(hr,{active:!0,title:!1,paragraph:{rows:4},className:`${I}-body-skeleton`}):v))))},wa=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:a,fontSize:s,lineHeight:u,modalTitleHeight:i,fontHeight:c,confirmBodyPadding:m}=e,l=`${t}-confirm`;return{[l]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${l}-body-wrapper`]:Object.assign({},nr()),[`&${t} ${t}-body`]:{padding:m},[`${l}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:a,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(a).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(a).equal()).div(2).equal()}},[`${l}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${K(e.marginSM)})`},[`${e.iconCls} + ${l}-paragraph`]:{maxWidth:`calc(100% - ${K(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${l}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},[`${l}-content`]:{color:e.colorText,fontSize:s,lineHeight:u},[`${l}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${l}-error ${l}-body > ${e.iconCls}`]:{color:e.colorError},[`${l}-warning ${l}-body > ${e.iconCls},
        ${l}-confirm ${l}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${l}-info ${l}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${l}-success ${l}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},Ea=ut(["Modal","confirm"],e=>{const t=da(e);return wa(t)},ma,{order:-1e3});var ja=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function mn(e){const{prefixCls:t,icon:n,okText:r,cancelText:a,confirmPrefixCls:s,type:u,okCancel:i,footer:c,locale:m}=e,l=ja(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let p=n;if(!n&&n!==null)switch(u){case"info":p=o.createElement($r,null);break;case"success":p=o.createElement(Or,null);break;case"error":p=o.createElement(Nr,null);break;default:p=o.createElement(Sr,null)}const h=i??u==="confirm",g=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[x]=Xe("Modal"),v=m||x,S=r||(h?v?.okText:v?.justOkText),y=a||v?.cancelText,f=Object.assign({autoFocusButton:g,cancelTextLocale:y,okTextLocale:S,mergedOkCancel:h},l),C=o.useMemo(()=>f,pe(Object.values(f))),b=o.createElement(o.Fragment,null,o.createElement(Pt,null),o.createElement(It,null)),E=e.title!==void 0&&e.title!==null,P=`${s}-body`;return o.createElement("div",{className:`${s}-body-wrapper`},o.createElement("div",{className:T(P,{[`${P}-has-title`]:E})},p,o.createElement("div",{className:`${s}-paragraph`},E&&o.createElement("span",{className:`${s}-title`},e.title),o.createElement("div",{className:`${s}-content`},e.content))),c===void 0||typeof c=="function"?o.createElement(sn,{value:C},o.createElement("div",{className:`${s}-btns`},typeof c=="function"?c(b,{OkBtn:It,CancelBtn:Pt}):b)):c,o.createElement(Ea,{prefixCls:t}))}const Pa=e=>{const{close:t,zIndex:n,maskStyle:r,direction:a,prefixCls:s,wrapClassName:u,rootPrefixCls:i,bodyStyle:c,closable:m=!1,onConfirm:l,styles:p}=e,h=`${s}-confirm`,g=e.width||416,x=e.style||{},v=e.mask===void 0?!0:e.mask,S=e.maskClosable===void 0?!1:e.maskClosable,y=T(h,`${h}-${e.type}`,{[`${h}-rtl`]:a==="rtl"},e.className),[,f]=rr(),C=o.useMemo(()=>n!==void 0?n:f.zIndexPopupBase+yr,[n,f]);return o.createElement(dn,Object.assign({},e,{className:y,wrapClassName:T({[`${h}-centered`]:!!e.centered},u),onCancel:()=>{t?.({triggerCancel:!0}),l?.(!1)},title:"",footer:null,transitionName:Re(i||"","zoom",e.transitionName),maskTransitionName:Re(i||"","fade",e.maskTransitionName),mask:v,maskClosable:S,style:x,styles:Object.assign({body:c,mask:r},p),width:g,zIndex:C,closable:m}),o.createElement(mn,Object.assign({},e,{confirmPrefixCls:h})))},fn=e=>{const{rootPrefixCls:t,iconPrefixCls:n,direction:r,theme:a}=e;return o.createElement(dt,{prefixCls:t,iconPrefixCls:n,direction:r,theme:a},o.createElement(Pa,Object.assign({},e)))},he=[];let gn="";function pn(){return gn}const Ia=e=>{var t,n;const{prefixCls:r,getContainer:a,direction:s}=e,u=Gt(),i=o.useContext(de),c=pn()||i.getPrefixCls(),m=r||`${c}-modal`;let l=a;return l===!1&&(l=void 0),D.createElement(fn,Object.assign({},e,{rootPrefixCls:c,prefixCls:m,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:s??i.direction,locale:(n=(t=i.locale)===null||t===void 0?void 0:t.Modal)!==null&&n!==void 0?n:u,getContainer:l}))};function Be(e){const t=or(),n=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:c,open:!0}),a,s;function u(...l){var p;if(l.some(x=>x?.triggerCancel)){var g;(p=e.onCancel)===null||p===void 0||(g=p).call.apply(g,[e,()=>{}].concat(pe(l.slice(1))))}for(let x=0;x<he.length;x++)if(he[x]===c){he.splice(x,1);break}s()}function i(l){clearTimeout(a),a=setTimeout(()=>{const p=t.getPrefixCls(void 0,pn()),h=t.getIconPrefixCls(),g=t.getTheme(),x=D.createElement(Ia,Object.assign({},l));s=ar()(D.createElement(dt,{prefixCls:p,iconPrefixCls:h,theme:g},t.holderRender?t.holderRender(x):x),n)})}function c(...l){r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),u.apply(this,l)}}),r.visible&&delete r.visible,i(r)}function m(l){typeof l=="function"?r=l(r):r=Object.assign(Object.assign({},r),l),i(r)}return i(r),he.push(c),{destroy:c,update:m}}function hn(e){return Object.assign(Object.assign({},e),{type:"warning"})}function vn(e){return Object.assign(Object.assign({},e),{type:"info"})}function bn(e){return Object.assign(Object.assign({},e),{type:"success"})}function Cn(e){return Object.assign(Object.assign({},e),{type:"error"})}function xn(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ra({rootPrefixCls:e}){gn=e}var za=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Ma=(e,t)=>{var n,{afterClose:r,config:a}=e,s=za(e,["afterClose","config"]);const[u,i]=o.useState(!0),[c,m]=o.useState(a),{direction:l,getPrefixCls:p}=o.useContext(de),h=p("modal"),g=p(),x=()=>{var f;r(),(f=c.afterClose)===null||f===void 0||f.call(c)},v=(...f)=>{var C;if(i(!1),f.some(P=>P?.triggerCancel)){var E;(C=c.onCancel)===null||C===void 0||(E=C).call.apply(E,[c,()=>{}].concat(pe(f.slice(1))))}};o.useImperativeHandle(t,()=>({destroy:v,update:f=>{m(C=>{const b=typeof f=="function"?f(C):f;return Object.assign(Object.assign({},C),b)})}}));const S=(n=c.okCancel)!==null&&n!==void 0?n:c.type==="confirm",[y]=Xe("Modal",Ht.Modal);return o.createElement(fn,Object.assign({prefixCls:h,rootPrefixCls:g},c,{close:v,open:u,afterClose:x,okText:c.okText||(S?y?.okText:y?.justOkText),direction:c.direction||l,cancelText:c.cancelText||y?.cancelText},s))},Ta=o.forwardRef(Ma);let kt=0;const ka=o.memo(o.forwardRef((e,t)=>{const[n,r]=Ca();return o.useImperativeHandle(t,()=>({patchElement:r}),[]),o.createElement(o.Fragment,null,n)}));function Ba(){const e=o.useRef(null),[t,n]=o.useState([]);o.useEffect(()=>{t.length&&(pe(t).forEach(u=>{u()}),n([]))},[t]);const r=o.useCallback(s=>function(i){var c;kt+=1;const m=o.createRef();let l;const p=new Promise(S=>{l=S});let h=!1,g;const x=o.createElement(Ta,{key:`modal-${kt}`,config:s(i),ref:m,afterClose:()=>{g?.()},isSilent:()=>h,onConfirm:S=>{l(S)}});return g=(c=e.current)===null||c===void 0?void 0:c.patchElement(x),g&&he.push(g),{destroy:()=>{function S(){var y;(y=m.current)===null||y===void 0||y.destroy()}m.current?S():n(y=>[].concat(pe(y),[S]))},update:S=>{function y(){var f;(f=m.current)===null||f===void 0||f.update(S)}m.current?y():n(f=>[].concat(pe(f),[y]))},then:S=>(h=!0,p.then(S))}},[]);return[o.useMemo(()=>({info:r(vn),success:r(bn),error:r(Cn),warning:r(hn),confirm:r(xn)}),[]),o.createElement(ka,{key:"modal-holder",ref:e})]}const st=o.createContext({}),Fa=e=>{const{antCls:t,componentCls:n,iconCls:r,avatarBg:a,avatarColor:s,containerSize:u,containerSizeLG:i,containerSizeSM:c,textFontSize:m,textFontSizeLG:l,textFontSizeSM:p,iconFontSize:h,iconFontSizeLG:g,iconFontSizeSM:x,borderRadius:v,borderRadiusLG:S,borderRadiusSM:y,lineWidth:f,lineType:C}=e,b=(E,P,w,B)=>({width:E,height:E,borderRadius:"50%",fontSize:P,[`&${n}-square`]:{borderRadius:B},[`&${n}-icon`]:{fontSize:w,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Se(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:s,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${K(f)} ${C} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),b(u,m,h,v)),{"&-lg":Object.assign({},b(i,l,g,S)),"&-sm":Object.assign({},b(c,p,x,y)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},_a=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:r,groupSpace:a}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:a}}}},Da=e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:r,fontSize:a,fontSizeLG:s,fontSizeXL:u,fontSizeHeading3:i,marginXS:c,marginXXS:m,colorBorderBg:l}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:r,textFontSize:a,textFontSizeLG:a,textFontSizeSM:a,iconFontSize:Math.round((s+u)/2),iconFontSizeLG:i,iconFontSizeSM:a,groupSpace:m,groupOverlapping:-c,groupBorderColor:l}},yn=qe("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,r=Ue(e,{avatarBg:n,avatarColor:t});return[Fa(r),_a(r)]},Da);var Aa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Sn=o.forwardRef((e,t)=>{const{prefixCls:n,shape:r,size:a,src:s,srcSet:u,icon:i,className:c,rootClassName:m,style:l,alt:p,draggable:h,children:g,crossOrigin:x,gap:v=4,onError:S}=e,y=Aa(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[f,C]=o.useState(1),[b,E]=o.useState(!1),[P,w]=o.useState(!0),B=o.useRef(null),W=o.useRef(null),V=ct(t,B),{getPrefixCls:A,avatar:k}=o.useContext(de),O=o.useContext(st),G=()=>{if(!W.current||!B.current)return;const H=W.current.offsetWidth,L=B.current.offsetWidth;H!==0&&L!==0&&v*2<L&&C(L-v*2<H?(L-v*2)/H:1)};o.useEffect(()=>{E(!0)},[]),o.useEffect(()=>{w(!0),C(1)},[s]),o.useEffect(G,[v]);const Z=()=>{S?.()!==!1&&w(!1)},I=Jt(H=>{var L,J;return(J=(L=a??O?.size)!==null&&L!==void 0?L:H)!==null&&J!==void 0?J:"default"}),Y=Object.keys(typeof I=="object"?I||{}:{}).some(H=>["xs","sm","md","lg","xl","xxl"].includes(H)),F=wr(Y),X=o.useMemo(()=>{if(typeof I!="object")return{};const H=Er.find(J=>F[J]),L=I[H];return L?{width:L,height:L,fontSize:L&&(i||g)?L/2:18}:{}},[F,I]),R=A("avatar",n),_=Me(R),[U,q,te]=yn(R,_),ne=T({[`${R}-lg`]:I==="large",[`${R}-sm`]:I==="small"}),fe=o.isValidElement(s),ge=r||O?.shape||"circle",z=T(R,ne,k?.className,`${R}-${ge}`,{[`${R}-image`]:fe||s&&P,[`${R}-icon`]:!!i},te,_,c,m,q),oe=typeof I=="number"?{width:I,height:I,fontSize:i?I/2:18}:{};let se;if(typeof s=="string"&&P)se=o.createElement("img",{src:s,draggable:h,srcSet:u,onError:Z,alt:p,crossOrigin:x});else if(fe)se=s;else if(i)se=i;else if(b||f!==1){const H=`scale(${f})`,L={msTransform:H,WebkitTransform:H,transform:H};se=o.createElement(jr,{onResize:G},o.createElement("span",{className:`${R}-string`,ref:W,style:Object.assign({},L)},g))}else se=o.createElement("span",{className:`${R}-string`,style:{opacity:0},ref:W},g);return U(o.createElement("span",Object.assign({},y,{style:Object.assign(Object.assign(Object.assign(Object.assign({},oe),X),k?.style),l),className:z,ref:V}),se))}),Ge=e=>e?typeof e=="function"?e():e:null,Va=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:r,fontWeightStrong:a,innerPadding:s,boxShadowSecondary:u,colorTextHeading:i,borderRadiusLG:c,zIndexPopup:m,titleMarginBottom:l,colorBgElevated:p,popoverBg:h,titleBorderBottom:g,innerContentPadding:x,titlePadding:v}=e;return[{[t]:Object.assign(Object.assign({},Se(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:m,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":p,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:h,backgroundClip:"padding-box",borderRadius:c,boxShadow:u,padding:s},[`${t}-title`]:{minWidth:r,marginBottom:l,color:i,fontWeight:a,borderBottom:g,padding:v},[`${t}-inner-content`]:{color:n,padding:x}})},Ir(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},La=e=>{const{componentCls:t}=e;return{[t]:Rr.map(n=>{const r=e[`${n}6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":r,[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{background:"transparent"}}}})}},Wa=e=>{const{lineWidth:t,controlHeight:n,fontHeight:r,padding:a,wireframe:s,zIndexPopupBase:u,borderRadiusLG:i,marginXS:c,lineType:m,colorSplit:l,paddingSM:p}=e,h=n-r,g=h/2,x=h/2-t,v=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:u+30},zr(e)),Mr({contentRadius:i,limitVerticalRadius:!0})),{innerPadding:s?0:12,titleMarginBottom:s?0:c,titlePadding:s?`${g}px ${v}px ${x}px`:0,titleBorderBottom:s?`${t}px ${m} ${l}`:"none",innerContentPadding:s?`${p}px ${v}px`:0})},Nn=qe("Popover",e=>{const{colorBgElevated:t,colorText:n}=e,r=Ue(e,{popoverBg:t,popoverColor:n});return[Va(r),La(r),Pr(r,"zoom-big")]},Wa,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Ha=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const On=({title:e,content:t,prefixCls:n})=>!e&&!t?null:o.createElement(o.Fragment,null,e&&o.createElement("div",{className:`${n}-title`},e),t&&o.createElement("div",{className:`${n}-inner-content`},t)),Ga=e=>{const{hashId:t,prefixCls:n,className:r,style:a,placement:s="top",title:u,content:i,children:c}=e,m=Ge(u),l=Ge(i),p=T(t,n,`${n}-pure`,`${n}-placement-${s}`,r);return o.createElement("div",{className:p,style:a},o.createElement("div",{className:`${n}-arrow`}),o.createElement(Tr,Object.assign({},e,{className:t,prefixCls:n}),c||o.createElement(On,{prefixCls:n,title:m,content:l})))},qa=e=>{const{prefixCls:t,className:n}=e,r=Ha(e,["prefixCls","className"]),{getPrefixCls:a}=o.useContext(de),s=a("popover",t),[u,i,c]=Nn(s);return u(o.createElement(Ga,Object.assign({},r,{prefixCls:s,hashId:i,className:T(n,c)})))};var Ua=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Ka=o.forwardRef((e,t)=>{var n,r;const{prefixCls:a,title:s,content:u,overlayClassName:i,placement:c="top",trigger:m="hover",children:l,mouseEnterDelay:p=.1,mouseLeaveDelay:h=.1,onOpenChange:g,overlayStyle:x={},styles:v,classNames:S}=e,y=Ua(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:f,className:C,style:b,classNames:E,styles:P}=sr("popover"),w=f("popover",a),[B,W,V]=Nn(w),A=f(),k=T(i,W,V,C,E.root,S?.root),O=T(E.body,S?.body),[G,Z]=kr(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),I=(_,U)=>{Z(_,!0),g?.(_,U)},Y=_=>{_.keyCode===Fr.ESC&&I(!1,_)},F=_=>{I(_)},X=Ge(s),R=Ge(u);return B(o.createElement(Br,Object.assign({placement:c,trigger:m,mouseEnterDelay:p,mouseLeaveDelay:h},y,{prefixCls:w,classNames:{root:k,body:O},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},P.root),b),x),v?.root),body:Object.assign(Object.assign({},P.body),v?.body)},ref:t,open:G,onOpenChange:F,overlay:X||R?o.createElement(On,{prefixCls:w,title:X,content:R}):null,transitionName:Re(A,"zoom-big",y.transitionName),"data-popover-inject":!0}),qt(l,{onKeyDown:_=>{var U,q;o.isValidElement(l)&&((q=l==null?void 0:(U=l.props).onKeyDown)===null||q===void 0||q.call(U,_)),Y(_)}})))}),$n=Ka;$n._InternalPanelDoNotUseOrYouWillBeFired=qa;const Bt=e=>{const{size:t,shape:n}=o.useContext(st),r=o.useMemo(()=>({size:e.size||t,shape:e.shape||n}),[e.size,e.shape,t,n]);return o.createElement(st.Provider,{value:r},e.children)},Xa=e=>{var t,n,r,a;const{getPrefixCls:s,direction:u}=o.useContext(de),{prefixCls:i,className:c,rootClassName:m,style:l,maxCount:p,maxStyle:h,size:g,shape:x,maxPopoverPlacement:v,maxPopoverTrigger:S,children:y,max:f}=e,C=s("avatar",i),b=`${C}-group`,E=Me(C),[P,w,B]=yn(C,E),W=T(b,{[`${b}-rtl`]:u==="rtl"},B,E,c,m,w),V=_r(y).map((O,G)=>qt(O,{key:`avatar-key-${G}`})),A=f?.count||p,k=V.length;if(A&&A<k){const O=V.slice(0,A),G=V.slice(A,k),Z=f?.style||h,I=((t=f?.popover)===null||t===void 0?void 0:t.trigger)||S||"hover",Y=((n=f?.popover)===null||n===void 0?void 0:n.placement)||v||"top",F=Object.assign(Object.assign({content:G},f?.popover),{classNames:{root:T(`${b}-popover`,(a=(r=f?.popover)===null||r===void 0?void 0:r.classNames)===null||a===void 0?void 0:a.root)},placement:Y,trigger:I});return O.push(o.createElement($n,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},F),o.createElement(Sn,{style:Z},`+${k-A}`))),P(o.createElement(Bt,{shape:x,size:g},o.createElement("div",{className:W,style:l},O)))}return P(o.createElement(Bt,{shape:x,size:g},o.createElement("div",{className:W,style:l},V)))},wn=Sn;wn.Group=Xa;var Qa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},Ya=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:Qa}))},Za=o.forwardRef(Ya);function it(){return typeof BigInt=="function"}function En(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function be(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var r=t||"0",a=r.split("."),s=a[0]||"0",u=a[1]||"0";s==="0"&&u==="0"&&(n=!1);var i=n?"-":"";return{negative:n,negativeStr:i,trimStr:r,integerStr:s,decimalStr:u,fullStr:"".concat(i).concat(r)}}function pt(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function ve(e){var t=String(e);if(pt(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return r!=null&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&ht(t)?t.length-t.indexOf(".")-1:0}function Ye(e){var t=String(e);if(pt(e)){if(e>Number.MAX_SAFE_INTEGER)return String(it()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(it()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(ve(t))}return be(t).fullStr}function ht(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var Ja=(function(){function e(t){if(Kt(this,e),Q(this,"origin",""),Q(this,"negative",void 0),Q(this,"integer",void 0),Q(this,"decimal",void 0),Q(this,"decimalLen",void 0),Q(this,"empty",void 0),Q(this,"nan",void 0),En(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var n=t;if(pt(n)&&(n=Number(n)),n=typeof n=="string"?n:Ye(n),ht(n)){var r=be(n);this.negative=r.negative;var a=r.trimStr.split(".");this.integer=BigInt(a[0]);var s=a[1]||"0";this.decimal=BigInt(s),this.decimalLen=s.length}else this.nan=!0}return Ut(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(r)}},{key:"negate",value:function(){var n=new e(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,r,a){var s=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),u=this.alignDecimal(s),i=n.alignDecimal(s),c=r(u,i).toString(),m=a(s),l=be(c),p=l.negativeStr,h=l.trimStr,g="".concat(p).concat(h.padStart(m+1,"0"));return new e("".concat(g.slice(0,-m),".").concat(g.slice(-m)))}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=new e(n);return r.isInvalidate()?this:this.cal(r,function(a,s){return a+s},function(a){return a})}},{key:"multi",value:function(n){var r=new e(n);return this.isInvalidate()||r.isInvalidate()?new e(NaN):this.cal(r,function(a,s){return a*s},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===n?.toString()}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":be("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e})(),eo=(function(){function e(t){if(Kt(this,e),Q(this,"origin",""),Q(this,"number",void 0),Q(this,"empty",void 0),En(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return Ut(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=Number(n);if(Number.isNaN(r))return this;var a=this.number+r;if(a>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(ve(this.number),ve(r));return new e(a.toFixed(s))}},{key:"multi",value:function(n){var r=Number(n);if(this.isInvalidate()||Number.isNaN(r))return new e(NaN);var a=this.number*r;if(a>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(ve(this.number),ve(r));return new e(a.toFixed(s))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===n?.toNumber()}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":Ye(this.number):this.origin}}]),e})();function re(e){return it()?new Ja(e):new eo(e)}function Le(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var a=be(e),s=a.negativeStr,u=a.integerStr,i=a.decimalStr,c="".concat(t).concat(i),m="".concat(s).concat(u);if(n>=0){var l=Number(i[n]);if(l>=5&&!r){var p=re(e).add("".concat(s,"0.").concat("0".repeat(n)).concat(10-l));return Le(p.toString(),t,n,r)}return n===0?m:"".concat(m).concat(t).concat(i.padEnd(n,"0").slice(0,n))}return c===".0"?m:"".concat(m).concat(c)}function to(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(r,a){if(t[a])return t[a];var s=r[a];return typeof s=="function"?s.bind(r):s}}):e}function no(e,t){var n=o.useRef(null);function r(){try{var s=e.selectionStart,u=e.selectionEnd,i=e.value,c=i.substring(0,s),m=i.substring(u);n.current={start:s,end:u,value:i,beforeTxt:c,afterTxt:m}}catch{}}function a(){if(e&&n.current&&t)try{var s=e.value,u=n.current,i=u.beforeTxt,c=u.afterTxt,m=u.start,l=s.length;if(s.startsWith(i))l=i.length;else if(s.endsWith(c))l=s.length-n.current.afterTxt.length;else{var p=i[m-1],h=s.indexOf(p,m-1);h!==-1&&(l=h+1)}e.setSelectionRange(l,l)}catch(g){ir(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(g.message))}}return[r,a]}var ro=function(){var t=o.useState(!1),n=Pe(t,2),r=n[0],a=n[1];return lr(function(){a(Dr())},[]),r},ao=200,oo=600;function so(e){var t=e.prefixCls,n=e.upNode,r=e.downNode,a=e.upDisabled,s=e.downDisabled,u=e.onStep,i=o.useRef(),c=o.useRef([]),m=o.useRef();m.current=u;var l=function(){clearTimeout(i.current)},p=function(C,b){C.preventDefault(),l(),m.current(b);function E(){m.current(b),i.current=setTimeout(E,ao)}i.current=setTimeout(E,oo)};o.useEffect(function(){return function(){l(),c.current.forEach(function(f){return We.cancel(f)})}},[]);var h=ro();if(h)return null;var g="".concat(t,"-handler"),x=T(g,"".concat(g,"-up"),Q({},"".concat(g,"-up-disabled"),a)),v=T(g,"".concat(g,"-down"),Q({},"".concat(g,"-down-disabled"),s)),S=function(){return c.current.push(We(l))},y={unselectable:"on",role:"button",onMouseUp:S,onMouseLeave:S};return o.createElement("div",{className:"".concat(g,"-wrap")},o.createElement("span",ue({},y,{onMouseDown:function(C){p(C,!0)},"aria-label":"Increase Value","aria-disabled":a,className:x}),n||o.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),o.createElement("span",ue({},y,{onMouseDown:function(C){p(C,!1)},"aria-label":"Decrease Value","aria-disabled":s,className:v}),r||o.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Ft(e){var t=typeof e=="number"?Ye(e):be(e).fullStr,n=t.includes(".");return n?be(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const io=(function(){var e=o.useRef(0),t=function(){We.cancel(e.current)};return o.useEffect(function(){return t},[]),function(n){t(),e.current=We(function(){n()})}});var lo=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],co=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],_t=function(t,n){return t||n.isEmpty()?n.toString():n.toNumber()},Dt=function(t){var n=re(t);return n.isInvalidate()?null:n},uo=o.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,a=e.style,s=e.min,u=e.max,i=e.step,c=i===void 0?1:i,m=e.defaultValue,l=e.value,p=e.disabled,h=e.readOnly,g=e.upHandler,x=e.downHandler,v=e.keyboard,S=e.changeOnWheel,y=S===void 0?!1:S,f=e.controls,C=f===void 0?!0:f;e.classNames;var b=e.stringMode,E=e.parser,P=e.formatter,w=e.precision,B=e.decimalSeparator,W=e.onChange,V=e.onInput,A=e.onPressEnter,k=e.onStep,O=e.changeOnBlur,G=O===void 0?!0:O,Z=e.domRef,I=Xt(e,lo),Y="".concat(n,"-input"),F=o.useRef(null),X=o.useState(!1),R=Pe(X,2),_=R[0],U=R[1],q=o.useRef(!1),te=o.useRef(!1),ne=o.useRef(!1),fe=o.useState(function(){return re(l??m)}),ge=Pe(fe,2),z=ge[0],oe=ge[1];function se($){l===void 0&&oe($)}var H=o.useCallback(function($,N){if(!N)return w>=0?w:Math.max(ve($),ve(c))},[w,c]),L=o.useCallback(function($){var N=String($);if(E)return E(N);var M=N;return B&&(M=M.replace(B,".")),M.replace(/[^\w.-]+/g,"")},[E,B]),J=o.useRef(""),Fe=o.useCallback(function($,N){if(P)return P($,{userTyping:N,input:String(J.current)});var M=typeof $=="number"?Ye($):$;if(!N){var j=H(M,N);if(ht(M)&&(B||j>=0)){var ce=B||".";M=Le(M,ce,j)}}return M},[P,H,B]),ie=o.useState(function(){var $=m??l;return z.isInvalidate()&&["string","number"].includes(cr($))?Number.isNaN($)?"":$:Fe(z.toString(),!1)}),we=Pe(ie,2),le=we[0],Ct=we[1];J.current=le;function Ee($,N){Ct(Fe($.isInvalidate()?$.toString(!1):$.toString(!N),N))}var Ce=o.useMemo(function(){return Dt(u)},[u,w]),xe=o.useMemo(function(){return Dt(s)},[s,w]),xt=o.useMemo(function(){return!Ce||!z||z.isInvalidate()?!1:Ce.lessEquals(z)},[Ce,z]),yt=o.useMemo(function(){return!xe||!z||z.isInvalidate()?!1:z.lessEquals(xe)},[xe,z]),Vn=no(F.current,_),St=Pe(Vn,2),Ln=St[0],Wn=St[1],Nt=function(N){return Ce&&!N.lessEquals(Ce)?Ce:xe&&!xe.lessEquals(N)?xe:null},Je=function(N){return!Nt(N)},_e=function(N,M){var j=N,ce=Je(j)||j.isEmpty();if(!j.isEmpty()&&!M&&(j=Nt(j)||j,ce=!0),!h&&!p&&ce){var je=j.toString(),tt=H(je,M);return tt>=0&&(j=re(Le(je,".",tt)),Je(j)||(j=re(Le(je,".",tt,!0)))),j.equals(z)||(se(j),W?.(j.isEmpty()?null:_t(b,j)),l===void 0&&Ee(j,M)),j}return z},Hn=io(),Ot=function $(N){if(Ln(),J.current=N,Ct(N),!te.current){var M=L(N),j=re(M);j.isNaN()||_e(j,!0)}V?.(N),Hn(function(){var ce=N;E||(ce=N.replace(/。/g,".")),ce!==N&&$(ce)})},Gn=function(){te.current=!0},qn=function(){te.current=!1,Ot(F.current.value)},Un=function(N){Ot(N.target.value)},et=function(N){var M;if(!(N&&xt||!N&&yt)){q.current=!1;var j=re(ne.current?Ft(c):c);N||(j=j.negate());var ce=(z||re(0)).add(j.toString()),je=_e(ce,!1);k?.(_t(b,je),{offset:ne.current?Ft(c):c,type:N?"up":"down"}),(M=F.current)===null||M===void 0||M.focus()}},$t=function(N){var M=re(L(le)),j;M.isNaN()?j=_e(z,N):j=_e(M,N),l!==void 0?Ee(z,!1):j.isNaN()||Ee(j,!1)},Kn=function(){q.current=!0},Xn=function(N){var M=N.key,j=N.shiftKey;q.current=!0,ne.current=j,M==="Enter"&&(te.current||(q.current=!1),$t(!1),A?.(N)),v!==!1&&!te.current&&["Up","ArrowUp","Down","ArrowDown"].includes(M)&&(et(M==="Up"||M==="ArrowUp"),N.preventDefault())},Qn=function(){q.current=!1,ne.current=!1};o.useEffect(function(){if(y&&_){var $=function(j){et(j.deltaY<0),j.preventDefault()},N=F.current;if(N)return N.addEventListener("wheel",$,{passive:!1}),function(){return N.removeEventListener("wheel",$)}}});var Yn=function(){G&&$t(!1),U(!1),q.current=!1};return nt(function(){z.isInvalidate()||Ee(z,!1)},[w,P]),nt(function(){var $=re(l);oe($);var N=re(L(le));(!$.equals(N)||!q.current||P)&&Ee($,q.current)},[l]),nt(function(){P&&Wn()},[le]),o.createElement("div",{ref:Z,className:T(n,r,Q(Q(Q(Q(Q({},"".concat(n,"-focused"),_),"".concat(n,"-disabled"),p),"".concat(n,"-readonly"),h),"".concat(n,"-not-a-number"),z.isNaN()),"".concat(n,"-out-of-range"),!z.isInvalidate()&&!Je(z))),style:a,onFocus:function(){U(!0)},onBlur:Yn,onKeyDown:Xn,onKeyUp:Qn,onCompositionStart:Gn,onCompositionEnd:qn,onBeforeInput:Kn},C&&o.createElement(so,{prefixCls:n,upNode:g,downNode:x,upDisabled:xt,downDisabled:yt,onStep:et}),o.createElement("div",{className:"".concat(Y,"-wrap")},o.createElement("input",ue({autoComplete:"off",role:"spinbutton","aria-valuemin":s,"aria-valuemax":u,"aria-valuenow":z.isInvalidate()?null:z.toString(),step:c},I,{ref:ct(F,t),className:Y,value:le,onChange:Un,disabled:p,readOnly:h}))))}),mo=o.forwardRef(function(e,t){var n=e.disabled,r=e.style,a=e.prefixCls,s=a===void 0?"rc-input-number":a,u=e.value,i=e.prefix,c=e.suffix,m=e.addonBefore,l=e.addonAfter,p=e.className,h=e.classNames,g=Xt(e,co),x=o.useRef(null),v=o.useRef(null),S=o.useRef(null),y=function(C){S.current&&Vr(S.current,C)};return o.useImperativeHandle(t,function(){return to(S.current,{focus:y,nativeElement:x.current.nativeElement||v.current})}),o.createElement(Ar,{className:p,triggerFocus:y,prefixCls:s,value:u,disabled:n,style:r,prefix:i,suffix:c,addonAfter:l,addonBefore:m,classNames:h,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:x},o.createElement(uo,ue({prefixCls:s,disabled:n,ref:S,domRef:v,className:h?.input},g)))});const fo=e=>{var t;const n=(t=e.handleVisible)!==null&&t!==void 0?t:"auto",r=e.controlHeightSM-e.lineWidth*2;return Object.assign(Object.assign({},Lr(e)),{controlWidth:90,handleWidth:r,handleFontSize:e.fontSize/2,handleVisible:n,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new Qt(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:n===!0?1:0,handleVisibleWidth:n===!0?r:0})},At=({componentCls:e,borderRadiusSM:t,borderRadiusLG:n},r)=>{const a=r==="lg"?n:t;return{[`&-${r}`]:{[`${e}-handler-wrap`]:{borderStartEndRadius:a,borderEndEndRadius:a},[`${e}-handler-up`]:{borderStartEndRadius:a},[`${e}-handler-down`]:{borderEndEndRadius:a}}}},go=e=>{const{componentCls:t,lineWidth:n,lineType:r,borderRadius:a,inputFontSizeSM:s,inputFontSizeLG:u,controlHeightLG:i,controlHeightSM:c,colorError:m,paddingInlineSM:l,paddingBlockSM:p,paddingBlockLG:h,paddingInlineLG:g,colorIcon:x,motionDurationMid:v,handleHoverColor:S,handleOpacity:y,paddingInline:f,paddingBlock:C,handleBg:b,handleActiveBg:E,colorTextDisabled:P,borderRadiusSM:w,borderRadiusLG:B,controlWidth:W,handleBorderColor:V,filledHandleBg:A,lineHeightLG:k,calc:O}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Se(e)),en(e)),{display:"inline-block",width:W,margin:0,padding:0,borderRadius:a}),Gr(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${K(n)} ${r} ${V}`}}})),qr(e,{[`${t}-handler-wrap`]:{background:A,[`${t}-handler-down`]:{borderBlockStart:`${K(n)} ${r} ${V}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:b}}})),Ur(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${K(n)} ${r} ${V}`}}})),Kr(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:u,lineHeight:k,borderRadius:B,[`input${t}-input`]:{height:O(i).sub(O(n).mul(2)).equal(),padding:`${K(h)} ${K(g)}`}},"&-sm":{padding:0,fontSize:s,borderRadius:w,[`input${t}-input`]:{height:O(c).sub(O(n).mul(2)).equal(),padding:`${K(p)} ${K(l)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:m}}},"&-group":Object.assign(Object.assign(Object.assign({},Se(e)),Qr(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:B,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:w}}},Yr(e)),Zr(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Se(e)),{width:"100%",padding:`${K(C)} ${K(f)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:a,outline:0,transition:`all ${v} linear`,appearance:"textfield",fontSize:"inherit"}),Xr(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:y,height:"100%",borderStartStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${v}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:x,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${K(n)} ${r} ${V}`,transition:`all ${v} linear`,"&:active":{background:E},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:S}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},ur()),{color:x,transition:`all ${v} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:a},[`${t}-handler-down`]:{borderEndEndRadius:a}},At(e,"lg")),At(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:P}})}]},po=e=>{const{componentCls:t,paddingBlock:n,paddingInline:r,inputAffixPadding:a,controlWidth:s,borderRadiusLG:u,borderRadiusSM:i,paddingInlineLG:c,paddingInlineSM:m,paddingBlockLG:l,paddingBlockSM:p,motionDurationMid:h}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${K(n)} 0`}},en(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:s,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:u,paddingInlineStart:c,[`input${t}-input`]:{padding:`${K(l)} 0`}},"&-sm":{borderRadius:i,paddingInlineStart:m,[`input${t}-input`]:{padding:`${K(p)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:a},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:a,transition:`margin ${h}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(r).equal()}}),[`${t}-underlined`]:{borderRadius:0}}},ho=qe("InputNumber",e=>{const t=Ue(e,Wr(e));return[go(t),po(t),Hr(t)]},fo,{unitless:{handleOpacity:!0},resetFont:!1});var vo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const jn=o.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=o.useContext(de),a=o.useRef(null);o.useImperativeHandle(t,()=>a.current);const{className:s,rootClassName:u,size:i,disabled:c,prefixCls:m,addonBefore:l,addonAfter:p,prefix:h,suffix:g,bordered:x,readOnly:v,status:S,controls:y,variant:f}=e,C=vo(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),b=n("input-number",m),E=Me(b),[P,w,B]=ho(b,E),{compactSize:W,compactItemClassnames:V}=Jr(b,r);let A=o.createElement(Za,{className:`${b}-handler-up-inner`}),k=o.createElement(fa,{className:`${b}-handler-down-inner`});const O=typeof y=="boolean"?y:void 0;typeof y=="object"&&(A=typeof y.upIcon>"u"?A:o.createElement("span",{className:`${b}-handler-up-inner`},y.upIcon),k=typeof y.downIcon>"u"?k:o.createElement("span",{className:`${b}-handler-down-inner`},y.downIcon));const{hasFeedback:G,status:Z,isFormItemInput:I,feedbackIcon:Y}=o.useContext(ea),F=na(Z,S),X=Jt(z=>{var oe;return(oe=i??W)!==null&&oe!==void 0?oe:z}),R=o.useContext(dr),_=c??R,[U,q]=ta("inputNumber",f,x),te=G&&o.createElement(o.Fragment,null,Y),ne=T({[`${b}-lg`]:X==="large",[`${b}-sm`]:X==="small",[`${b}-rtl`]:r==="rtl",[`${b}-in-form-item`]:I},w),fe=`${b}-group`,ge=o.createElement(mo,Object.assign({ref:a,disabled:_,className:T(B,E,s,u,V),upHandler:A,downHandler:k,prefixCls:b,readOnly:v,controls:O,prefix:h,suffix:te||g,addonBefore:l&&o.createElement(at,{form:!0,space:!0},l),addonAfter:p&&o.createElement(at,{form:!0,space:!0},p),classNames:{input:ne,variant:T({[`${b}-${U}`]:q},wt(b,F,G)),affixWrapper:T({[`${b}-affix-wrapper-sm`]:X==="small",[`${b}-affix-wrapper-lg`]:X==="large",[`${b}-affix-wrapper-rtl`]:r==="rtl",[`${b}-affix-wrapper-without-controls`]:y===!1||_||v},w),wrapper:T({[`${fe}-rtl`]:r==="rtl"},w),groupWrapper:T({[`${b}-group-wrapper-sm`]:X==="small",[`${b}-group-wrapper-lg`]:X==="large",[`${b}-group-wrapper-rtl`]:r==="rtl",[`${b}-group-wrapper-${U}`]:q},wt(`${b}-group-wrapper`,F,G),w)}},C));return P(ge)}),Pn=jn,bo=e=>o.createElement(dt,{theme:{components:{InputNumber:{handleVisible:!0}}}},o.createElement(jn,Object.assign({},e)));Pn._InternalPanelDoNotUseOrYouWillBeFired=bo;var Co=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const xo=e=>{const{prefixCls:t,className:n,closeIcon:r,closable:a,type:s,title:u,children:i,footer:c}=e,m=Co(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:l}=o.useContext(de),p=l(),h=t||l("modal"),g=Me(p),[x,v,S]=an(h,g),y=`${h}-confirm`;let f={};return s?f={closable:a??!1,title:"",footer:"",children:o.createElement(mn,Object.assign({},e,{prefixCls:h,confirmPrefixCls:y,rootPrefixCls:p,content:i}))}:f={closable:a??!0,title:u,footer:c!==null&&o.createElement(un,Object.assign({},e)),children:i},x(o.createElement(pa,Object.assign({prefixCls:h,className:T(v,`${h}-pure-panel`,s&&y,s&&`${y}-${s}`,n,S,g)},m,{closeIcon:cn(h,r),closable:a},f)))},yo=ga(xo);function In(e){return Be(hn(e))}const ee=dn;ee.useModal=Ba;ee.info=function(t){return Be(vn(t))};ee.success=function(t){return Be(bn(t))};ee.error=function(t){return Be(Cn(t))};ee.warning=In;ee.warn=In;ee.confirm=function(t){return Be(xn(t))};ee.destroyAll=function(){for(;he.length;){const t=he.pop();t&&t()}};ee.config=Ra;ee._InternalPanelDoNotUseOrYouWillBeFired=yo;var So={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},No=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:So}))},Oo=o.forwardRef(No),$o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},wo=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:$o}))},Rn=o.forwardRef(wo),Eo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},jo=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:Eo}))},Po=o.forwardRef(jo),Io={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},Ro=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:Io}))},zo=o.forwardRef(Ro),Mo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},To=function(t,n){return o.createElement($e,ue({},t,{ref:n,icon:Mo}))},ko=o.forwardRef(To);const Bo=e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:a,calc:s}=e,u=s(r).sub(n).equal(),i=s(t).sub(n).equal();return{[a]:Object.assign(Object.assign({},Se(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:u,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${K(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:i,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:u}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},vt=e=>{const{lineWidth:t,fontSizeIcon:n,calc:r}=e,a=e.fontSizeSM;return Ue(e,{tagFontSize:a,tagLineHeight:K(r(e.lineHeightSM).mul(a).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},bt=e=>({defaultBg:new Qt(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),zn=qe("Tag",e=>{const t=vt(e);return Bo(t)},bt);var Fo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const _o=o.forwardRef((e,t)=>{const{prefixCls:n,style:r,className:a,checked:s,children:u,icon:i,onChange:c,onClick:m}=e,l=Fo(e,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:p,tag:h}=o.useContext(de),g=C=>{c?.(!s),m?.(C)},x=p("tag",n),[v,S,y]=zn(x),f=T(x,`${x}-checkable`,{[`${x}-checkable-checked`]:s},h?.className,a,S,y);return v(o.createElement("span",Object.assign({},l,{ref:t,style:Object.assign(Object.assign({},r),h?.style),className:f,onClick:g}),i,o.createElement("span",null,u)))}),Do=e=>ra(e,(t,{textColor:n,lightBorderColor:r,lightColor:a,darkColor:s})=>({[`${e.componentCls}${e.componentCls}-${t}`]:{color:n,background:a,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:s,borderColor:s},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}})),Ao=ut(["Tag","preset"],e=>{const t=vt(e);return Do(t)},bt);function Vo(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const De=(e,t,n)=>{const r=Vo(n);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},Lo=ut(["Tag","status"],e=>{const t=vt(e);return[De(t,"success","Success"),De(t,"processing","Info"),De(t,"error","Error"),De(t,"warning","Warning")]},bt);var Wo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Ho=o.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:a,style:s,children:u,icon:i,color:c,onClose:m,bordered:l=!0,visible:p}=e,h=Wo(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:g,direction:x,tag:v}=o.useContext(de),[S,y]=o.useState(!0),f=aa(h,["closeIcon","closable"]);o.useEffect(()=>{p!==void 0&&y(p)},[p]);const C=oa(c),b=sa(c),E=C||b,P=Object.assign(Object.assign({backgroundColor:c&&!E?c:void 0},v?.style),s),w=g("tag",n),[B,W,V]=zn(w),A=T(w,v?.className,{[`${w}-${c}`]:E,[`${w}-has-color`]:c&&!E,[`${w}-hidden`]:!S,[`${w}-rtl`]:x==="rtl",[`${w}-borderless`]:!l},r,a,W,V),k=F=>{F.stopPropagation(),m?.(F),!F.defaultPrevented&&y(!1)},[,O]=ln(He(e),He(v),{closable:!1,closeIconRender:F=>{const X=o.createElement("span",{className:`${w}-close-icon`,onClick:k},F);return mr(F,X,R=>({onClick:_=>{var U;(U=R?.onClick)===null||U===void 0||U.call(R,_),k(_)},className:T(R?.className,`${w}-close-icon`)}))}}),G=typeof h.onClick=="function"||u&&u.type==="a",Z=i||null,I=Z?o.createElement(o.Fragment,null,Z,u&&o.createElement("span",null,u)):u,Y=o.createElement("span",Object.assign({},f,{ref:t,className:A,style:P}),I,O,C&&o.createElement(Ao,{key:"preset",prefixCls:w}),b&&o.createElement(Lo,{key:"status",prefixCls:w}));return B(G?o.createElement(ia,{component:"Tag"},Y):Y)}),Mn=Ho;Mn.CheckableTag=_o;const Tn=o.createContext(null),Go=o.memo(({children:e,...t})=>d.jsx(Tn.Provider,{value:t,children:e})),qo=()=>{const e=o.useContext(Tn);if(!e)throw new Error("useGetAllChatsContract must be used within a GetAllChatsContractProvider");return e},kn=o.createContext(null),Uo=o.memo(({children:e,...t})=>d.jsx(kn.Provider,{value:t,children:e})),Bn=()=>{const e=o.useContext(kn);if(!e)throw new Error("useIsParticipantContract must be used within a IsParticipantContractProvider");return e},Fn=o.createContext(void 0);function Ko(e,t){switch(t.type){case"TOGGLE":{const n=!e[t.key];return t.mode==="single"&&n?{[t.key]:!0}:{...e,[t.key]:n}}case"SET":return t.mode==="single"&&t.value?{[t.key]:!0}:{...e,[t.key]:t.value};case"RESET":return t.initial;default:return e}}const Xo=({children:e,initialState:t={},mode:n="multiple"})=>{const[r,a]=o.useReducer(Ko,t),s=o.useCallback(c=>a({type:"TOGGLE",key:c,mode:n}),[n]),u=o.useCallback((c,m)=>a({type:"SET",key:c,value:m,mode:n}),[n]),i=o.useCallback(c=>a({type:"RESET",initial:c}),[]);return d.jsx(Fn.Provider,{value:{state:r,toggle:s,set:u,reset:i},children:e})},Qo=o.memo(Xo);function Yo(){const e=o.useContext(Fn);if(!e)throw new Error("useVisibility must be used within a VisibilityProvider");return e}const Zo=({children:e,targetKey:t,isOpenPropName:n="isOpen",shouldRender:r=!0,wrapper:a,...s})=>{const{isOpen:u}=Ze(t),i={...e.props,...s,[n]:u};if(!r&&!u)return null;const c=o.cloneElement(e,i);return a?a(c,u):c},lt=o.memo(Zo),Jo=({children:e,triggerKey:t,propName:n="onClick",...r})=>{const{toggle:a}=Ze(t);if(!e)throw new Error("VisibilityTrigger requires a child element");if(!o.isValidElement(e))throw new Error("VisibilityTrigger child must be a valid React element");const s=e?.props[n],u=o.useCallback(c=>{s?.(c),a()},[s,a]),i={...e?.props,...r,[n]:u};return o.cloneElement(e,i)},ye=o.memo(Jo);function Ze(e){const{state:t,toggle:n,set:r}=Yo(),a=!!t[e],s=o.useCallback(()=>{n(e)},[e,n]),u=o.useCallback(i=>{r(e,i)},[e,r]);return{isOpen:a,toggle:s,set:u}}const es=({chat:e,ActionSlot:t})=>{const{toggle:n}=Ze("deleteChat"),{loading:r,error:a,isParticipant:s}=Bn(),[u,i]=ze(),c=o.useMemo(()=>[{key:"delete",label:"Удалить чат",onClick:()=>{i(m=>{const l=new URLSearchParams(m);return l.set("deleteChat",e.id),l}),n()}}],[e.id,i,n]);return d.jsx(Ke,{className:"bg-gray-800 border-gray-700",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx("h3",{className:"text-white text-lg font-semibold mr-2",children:e.name}),d.jsxs(Mn,{color:"blue",className:"bg-blue-900/20 border-blue-700 text-blue-300",children:[d.jsx(zo,{className:"mr-1"}),e.maxUsers," макс."]})]}),e.description&&d.jsx("p",{className:"text-gray-300 mb-3 line-clamp-2",children:e.description}),d.jsxs("div",{className:"flex items-start gap-2 md:flex-row flex-col justify-between text-sm text-gray-400",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(wn,{size:"small",icon:d.jsx(vr,{}),className:"mr-2"}),d.jsxs("span",{children:["Создатель: ",e?.owner?.username]})]}),d.jsx("div",{children:d.jsxs("span",{children:["Создан: ",new Date(e.createdAt).toLocaleDateString()]})})]}),t&&d.jsx(t,{chat:e})]}),s===!0&&!r&&a?.length===0&&d.jsx(ha,{menu:{items:c},placement:"bottomRight",trigger:["click"],children:d.jsx(ae,{type:"text",icon:d.jsx(la,{className:"text-white text-2xl"})})})]})})},ts=o.memo(es),_n=o.createContext(null),ns=o.memo(({children:e,...t})=>d.jsx(_n.Provider,{value:t,children:e})),rs=()=>{const e=o.useContext(_n);if(!e)throw new Error("useDeleteChatContract must be used within a DeleteChatContractProvider");return e},{Text:Vt,Paragraph:Lt}=va,as=({isOpen:e,onCancel:t,chatId:n})=>{const{loading:r,deleteChat:a,error:s}=rs();console.log("OnClose:",t);const u=o.useCallback(async()=>{n&&(await a(n),t?.())},[n,a,t]);return d.jsx(ee,{open:e,onCancel:t,title:"Удаление чата",centered:!0,destroyOnHidden:!0,footer:[d.jsx(ae,{onClick:t,disabled:r,children:"Отмена"},"back"),d.jsx(ae,{type:"primary",danger:!0,loading:r,onClick:u,children:"Удалить"},"submit")],children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(Lt,{children:d.jsx(Vt,{className:"text-gray-300",children:"Вы уверены, что хотите удалить этот чат?"})}),d.jsx(Lt,{children:d.jsx(Vt,{type:"secondary",children:"Это действие будет необратимым. Все сообщения и данные, связанные с этим чатом, будут навсегда удалены."})}),s&&s.length>0&&d.jsx(Qe,{message:"Ошибка при удалении",description:s,type:"error",showIcon:!0})]})})},os=o.memo(as),ss=({children:e,...t})=>{const[n]=ze(),r=n.get("deleteChat")||void 0;console.log("Props in DeleteChatParamsManager:",t);const a=o.Children.map(e,s=>o.isValidElement(s)?o.cloneElement(s,{...t,chatId:r}):s);return d.jsx(d.Fragment,{children:a})},is=o.memo(ss),ls=({afterSuccess:e=Oe,afterError:t=Oe,showSuccessNotification:n=!0,showErrorNotification:r=!1})=>{const a=mt(),{error:s,isPending:u,mutateAsync:i,isError:c}=gt({mutationFn:Te.deleteChat,onSuccess:async(m,l)=>{n&&Ne("Чат успешно удалён","success"),e&&e(),await a.invalidateQueries({queryKey:["chats"],exact:!1}),await a.invalidateQueries({queryKey:["chat-details",l],exact:!1})},onError:async m=>{r&&Ne(m.message,"error"),t&&t()}});return{loading:u,deleteChat:i,error:c?s?.message:[]}},cs=({children:e,showErrorNotification:t,showSuccessNotification:n,afterError:r,afterSuccess:a})=>{const{loading:s,deleteChat:u,error:i}=ls({showSuccessNotification:n,showErrorNotification:t,afterSuccess:a,afterError:r});return d.jsx(ns,{deleteChat:u,error:i,loading:s,children:e})},us=o.memo(cs),ds=({chatId:e})=>{const{isPending:t,data:n,isError:r,error:a}=Yt({queryKey:["is-participant",e],queryFn:async()=>await Te.isParticipant(e),enabled:!!e});return{loading:t,isParticipant:n,error:r?a?.message:[]}},ms=({children:e,chatId:t=""})=>{const{loading:n,isParticipant:r,error:a}=ds({chatId:t});return d.jsx(Uo,{isParticipant:r&&r.isParticipant,error:a,loading:n,children:e})},fs=o.memo(ms),gs=({useContract:e=qo,ActionSlot:t})=>{const{loading:n,setPage:r,setLimit:a,error:s,data:u}=e();return n?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx(fr,{size:"large"})}):s?d.jsx(Qe,{message:"Ошибка загрузки чатов",description:s.join(", "),type:"error",className:"mb-4"}):u?.data?.length?d.jsxs("div",{className:"space-y-4",children:[d.jsx(jt,{itemLayout:"vertical",size:"large",dataSource:u.data,renderItem:i=>d.jsx(fs,{chatId:i.id,children:d.jsx(jt.Item,{children:d.jsx(ts,{ActionSlot:t,chat:i})})},i.id)}),d.jsx(us,{children:d.jsx(lt,{targetKey:"deleteChat",isOpenPropName:"isOpen",children:d.jsx(ye,{triggerKey:"deleteChat",propName:"onCancel",children:d.jsx(is,{children:d.jsx(os,{})})})})}),u.totalPages>1&&d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx(ba,{current:u.currentPage,total:u.total,pageSize:u.currentLimit,onChange:r,onShowSizeChange:(i,c)=>a?.(c),showSizeChanger:!1,itemRender:(i,c,m)=>d.jsx("span",{className:"text-gray-300",children:m})})})]}):d.jsx(Ke,{className:"bg-gray-800 border-gray-700 mt-8",children:d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Po,{className:"text-4xl text-gray-400 mb-4"}),d.jsx("h3",{className:"text-white text-lg font-medium mb-2",children:"Чаты не найдены"}),d.jsx("p",{className:"text-gray-400",children:"Создайте первый чат, чтобы начать общение"})]})})},ps=o.memo(gs),Dn=o.createContext(null),hs=o.memo(({children:e,...t})=>d.jsx(Dn.Provider,{value:t,children:e})),vs=()=>{const e=o.useContext(Dn);if(!e)throw new Error("useCreateChatContract must be used within a CreateChatContractProvider");return e},bs=({useContract:e=vs})=>{const{form:t,createChat:n,error:r,loading:a}=e(),{control:s,formState:{errors:u}}=t;return d.jsx(Ke,{className:"w-full max-w-md",title:"Создание нового чата",children:d.jsxs(me,{layout:"vertical",onFinish:n,className:"space-y-4",children:[r&&r.length>0&&d.jsx(Qe,{message:"Ошибка создания чата",description:r,type:"error",showIcon:!0,closable:!0,className:"mb-4"}),d.jsx(me.Item,{label:"Название чата",validateStatus:u.name?"error":"",help:u.name?.message,required:!0,children:d.jsx(Ie,{name:"name",control:s,render:({field:i})=>d.jsx(Ae,{...i,size:"large",prefix:d.jsx(Oo,{className:"text-gray-400"}),placeholder:"Введите название чата"})})}),d.jsx(me.Item,{label:"Описание",validateStatus:u.description?"error":"",help:u.description?.message,children:d.jsx(Ie,{name:"description",control:s,render:({field:i})=>d.jsx(Ae.TextArea,{...i,size:"large",autoSize:{minRows:2,maxRows:6},placeholder:"Добавьте описание (необязательно)"})})}),d.jsx(me.Item,{label:"Ключ доступа",required:!0,validateStatus:u.accessKey?"error":"",help:u.accessKey?.message,children:d.jsx(Ie,{name:"accessKey",control:s,render:({field:i})=>d.jsx(Ae.Password,{...i,size:"large",prefix:d.jsx(Rn,{className:"text-gray-400"}),placeholder:"Придумайте ключ для входа"})})}),d.jsx(me.Item,{label:"Макс. количество участников",validateStatus:u.maxUsers?"error":"",help:u.maxUsers?.message,required:!0,children:d.jsx(Ie,{name:"maxUsers",control:s,render:({field:i})=>d.jsx(Pn,{...i,min:2,max:100,size:"large",className:"w-full",prefix:d.jsx(ko,{className:"text-gray-400 mr-2"}),placeholder:"От 2 до 100"})})}),d.jsx(me.Item,{children:d.jsx(ae,{type:"primary",htmlType:"submit",size:"large",loading:a,className:"w-full",children:a?"Создание...":"Создать чат"})})]})})},Cs=o.memo(bs),An=o.createContext(null),xs=o.memo(({children:e,...t})=>d.jsx(An.Provider,{value:t,children:e})),ys=()=>{const e=o.useContext(An);if(!e)throw new Error("useEnterChatContract must be used within a EnterChatContractProvider");return e},Ss=({useContract:e=ys})=>{const{form:t,error:n,enterChat:r,loading:a}=e(),{control:s,formState:{errors:u}}=t;return d.jsx(Ke,{className:"w-full max-w-md",title:"Вход в чат по ключу доступа",children:d.jsxs(me,{layout:"vertical",onFinish:r,className:"space-y-4",children:[n&&n.length>0&&d.jsx(Qe,{message:"Ошибка",description:n,type:"error",showIcon:!0,closable:!0,className:"mb-4 bg-red-900/20 border-red-800"}),d.jsx(me.Item,{label:d.jsx("span",{className:"text-gray-300",children:"Ключ доступа"}),validateStatus:u.accessKey?"error":"",help:u.accessKey?.message,children:d.jsx(Ie,{name:"accessKey",control:s,render:({field:i})=>d.jsx(Ae.Password,{...i,size:"large",prefix:d.jsx(Rn,{className:"text-gray-400"}),placeholder:"Введите ключ доступа",className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})})}),d.jsx(me.Item,{children:d.jsx(ae,{type:"primary",htmlType:"submit",size:"large",loading:a,className:"w-full bg-blue-600 hover:bg-blue-700 border-none",children:a?"Вход...":"Войти в чат"})})]})})},Ns=o.memo(Ss),Os=({className:e,chat:t})=>{const{loading:n,error:r,isParticipant:a}=Bn(),{set:s,isOpen:u}=Ze("enterChat"),[i,c]=ze(),m=o.useCallback(()=>{if(a||!t)return;const l=new URLSearchParams(i);l.set("enterChatId",t?.id||""),c(l),s(!0)},[t,a,i,s,c]);return r&&r.length>0?d.jsxs("div",{className:"text-red-500",children:["Ошибка: ",r.join(", ")]}):a?d.jsx(gr,{to:`/chats/${t?.id}`,children:d.jsx(ae,{className:e,color:"cyan",variant:"solid",children:"Перейти в чат"})}):d.jsx(ae,{className:e,type:"primary",onClick:m,loading:n,disabled:n||a||u,children:a?"Вы в чате":"Войти в чат"})},$s=o.memo(Os),ws=({children:e,...t})=>{const[n]=ze(),r=n.get("enterChatId")||void 0,a=o.Children.map(e,s=>o.isValidElement(s)?o.cloneElement(s,{...t,chatId:r}):s);return d.jsx(d.Fragment,{children:a})},Es=o.memo(ws);function js(e,t){const[n,r]=o.useState(e);return o.useEffect(()=>{const a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}const Wt=(e,t)=>{if(e===null)return t;const n=Number(e);return Number.isInteger(n)&&n>0?n:t},Ps=({children:e})=>{const[t,n]=ze(),r=Wt(t.get("page"),1),a=Wt(t.get("limit"),50),s=t.get("search")||"",[u,i]=o.useState(s),c=js(u,500),m=t.get("sortOrder")||"asc",l=t.get("isPublic");if(!["asc","desc"].includes(m))throw new Error(`Invalid sortOrder: ${m}. Valid sortOrders are 'asc', 'desc'.`);const p=o.useCallback(f=>{n(C=>{const b=new URLSearchParams(C);return b.set("page",String(f)),b})},[n]),h=o.useCallback(f=>{n(C=>{const b=new URLSearchParams(C);return f<1||f>100?(b.set("limit",String(50)),b.set("page","1"),b):(b.set("limit",String(f)),b.set("page","1"),b)})},[n]),g=o.useCallback(f=>{n(C=>{const b=new URLSearchParams(C);return f.trim()===""?b.delete("search"):b.set("search",f),b.set("page","1"),b})},[n]),x=o.useCallback(f=>{f.trim()===""?i(""):i(f)},[]),v=o.useCallback(f=>{n(C=>{const b=new URLSearchParams(C);return f==="asc"||f==="desc"?b.set("sortOrder",f):b.delete("sortOrder"),b})},[n]),S=o.useCallback(()=>{n(f=>{const C=new URLSearchParams(f);return C.delete("search"),C.delete("sortOrder"),C.set("page","1"),C.set("limit","50"),C}),i("")},[n]);o.useEffect(()=>{g(c)},[c,g]);const y=o.Children.map(e,f=>o.isValidElement(f)?o.cloneElement(f,{page:r,limit:a,search:s,inputSearchValue:u,sortOrder:m,isPublic:l,setSort:v,setPage:p,setLimit:h,setSearch:x,resetFilters:S}):f);return d.jsx(d.Fragment,{children:y})},Is=o.memo(Ps),Rs=tn({name:Ve("Введите название чата").min(3,"Название чата должно содержать минимум 3 символа").max(100,"Название чата должно содержать максимум 100 символов"),description:Ve("Описание чата должно быть строкой").max(2e3,"Описание чата должно содержать максимум 20000 символов").optional(),accessKey:Ve("Введите ключ доступа").min(0,"Ключ доступа не может быть отрицательной длины").max(100,"Ключ доступа должен содержать максимум 100 символов"),maxUsers:ca("Введите число пользователей").int("Максимальное количество пользователей должно быть целым числом").min(2,"Минимальное количество пользователей: 2").max(100,"Максимальное количество пользователей: 100")}),zs=({afterSuccess:e=Oe,afterError:t=Oe,showSuccessNotification:n=!0,showErrorNotification:r=!1,clearForm:a=!1})=>{const s=mt(),{error:u,isPending:i,mutateAsync:c,isError:m}=gt({mutationFn:Te.createChat,onSuccess:async()=>{n&&Ne("Чат успешно создан!","success"),e&&e(),await s.invalidateQueries({queryKey:["chats"],exact:!1})},onError:async h=>{r&&Ne(h.message,"error"),t&&t()}}),l=nn({mode:"all",reValidateMode:"onChange",resolver:rn(Rs)}),p=l.handleSubmit(async h=>{await c(h),a&&l.reset()});return{form:l,loading:i,createChat:p,error:m?u?.message:[]}},Ms=({children:e,clearForm:t,showErrorNotification:n,showSuccessNotification:r,afterError:a,afterSuccess:s})=>{const{loading:u,createChat:i,form:c,error:m}=zs({showSuccessNotification:r,showErrorNotification:n,afterSuccess:s,afterError:a,clearForm:t});return d.jsx(hs,{createChat:i,form:c,error:m,loading:u,children:e})},Ts=o.memo(Ms),ks=tn({accessKey:Ve("Введите ключ доступа").min(0,"Ключ доступа не может быть отрицательной длины").max(100,"Ключ доступа должен содержать максимум 100 символов")}),Bs=({afterSuccess:e=Oe,afterError:t=Oe,showSuccessNotification:n=!0,showErrorNotification:r=!1,chatId:a="",clearForm:s=!1,redirectUrl:u})=>{const i=mt(),c=pr(),{error:m,isPending:l,mutateAsync:p,isError:h}=gt({mutationFn:async v=>Te.enterChat(a,v),onSuccess:async()=>{n&&Ne("Вы успешно вошли в чат!","success"),e&&e(),await i.invalidateQueries({queryKey:["chats"],exact:!1}),await i.invalidateQueries({queryKey:["is-participant",a],exact:!1}),await i.invalidateQueries({queryKey:["chat-details",a]}),u&&c(u)},onError:async v=>{r&&Ne(v.message,"error"),t&&t()}}),g=nn({mode:"all",reValidateMode:"onChange",resolver:rn(ks)}),x=g.handleSubmit(async v=>{await p(v),s&&g.reset()});return{form:g,loading:l,enterChat:x,error:h?m?.message:[]}},Fs=({children:e,chatId:t="",showSuccessNotification:n,showErrorNotification:r,clearForm:a,afterError:s,afterSuccess:u})=>{const{loading:i,enterChat:c,form:m,error:l}=Bs({showSuccessNotification:n,showErrorNotification:r,afterSuccess:u,afterError:s,chatId:t,clearForm:a});return d.jsx(xs,{enterChat:c,form:m,error:l,loading:i,children:e})},_s=o.memo(Fs),Ds=({dto:e})=>{const{error:t,data:n,isLoading:r}=Yt({queryKey:["chats",e.page,e.limit,e.sortOrder,e.search,e.sortBy],queryFn:async()=>await Te.getAllChats(e)});return{error:t?t.message:null,data:n,loading:r}},As=({limit:e,search:t,page:n,children:r,setPage:a,setSearch:s,setLimit:u,resetFilters:i,inputSearchValue:c="",setSort:m,sortBy:l,sortOrder:p})=>{const{error:h,data:g,loading:x}=Ds({dto:{limit:e,search:t,page:n,sortOrder:p,sortBy:l}});return d.jsx(Go,{data:g,loading:x,error:h,limit:e,search:t,page:n,setPage:a,setSearch:s,resetFilters:i,setLimit:u,inputSearchValue:c,setSort:m,sort:p,children:r})},Vs=o.memo(As),Ls=()=>d.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 py-8",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsx(Is,{children:d.jsx(Vs,{children:d.jsxs(Qo,{children:[d.jsxs("section",{className:"mb-8",children:[d.jsxs("div",{className:"flex flex-col gap-4 md:flex-row justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Доступные чаты"}),d.jsx(ye,{triggerKey:"createChat",propName:"onClick",children:d.jsx(ae,{children:"Создать новый чат"})}),d.jsx(lt,{targetKey:"createChat",isOpenPropName:"open",children:d.jsx(ye,{triggerKey:"createChat",propName:"onCancel",children:d.jsx(ee,{footer:null,destroyOnHidden:!0,title:"Создать новый чат",centered:!0,children:d.jsx(ye,{triggerKey:"createChat",propName:"afterSuccess",children:d.jsx(Ts,{children:d.jsx(Cs,{})})})})})})]}),d.jsx(ps,{ActionSlot:({chat:e})=>d.jsx($s,{chat:e,className:"mt-5 w-full"})})]}),d.jsx(ye,{triggerKey:"enterChat",propName:"onCancel",children:d.jsx(lt,{targetKey:"enterChat",isOpenPropName:"open",children:d.jsx(ee,{centered:!0,footer:null,destroyOnHidden:!0,title:"Вход в чат",children:d.jsx(Es,{children:d.jsx(ye,{triggerKey:"enterChat",propName:"afterSuccess",children:d.jsx(_s,{children:d.jsx("div",{className:"my-6",children:d.jsx(Ns,{})})})})})})})})]})})})})}),Us=o.memo(Ls);export{Us as default};
